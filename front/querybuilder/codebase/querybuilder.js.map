{"version":3,"file":"querybuilder.js","sources":["../sources/locales/be.js","../sources/locales/en.js","../sources/locales/index.js","../sources/locales/de.js","../sources/locales/es.js","../sources/locales/fr.js","../sources/locales/it.js","../sources/locales/ja.js","../sources/locales/pt.js","../sources/locales/ru.js","../sources/locales/zh.js","../sources/views/querybuilderline.js","../sources/modules/sort.js","../sources/modules/filters.js","../sources/modules/sql.js","../sources/views/querybuilder.js","../sources/views/filter.js"],"sourcesContent":["const locale = {\n\tor: \"або\",\n\tand: \"і\",\n\tdelete_rule: \"Выдаліць правіла\",\n\tadd_rule: \"Дадаць правіла\",\n\tadd_group: \"Дадаць групу\",\n\tless: \"менш\",\n\tless_or_equal: \"менш або роўна\",\n\tgreater: \"больш\",\n\tgreater_or_equal: \"больш або роўна\",\n\tbetween: \"паміж\",\n\tnot_between: \"не паміж\",\n\tbegins_with: \"пачынаецца з\",\n\tnot_begins_with: \"не пачынаецца з\",\n\tcontains: \"змяшчае\",\n\tnot_contains: \"не змяшчае\",\n\tends_with: \"заканчваецца\",\n\tnot_ends_with: \"не сканчаецца\",\n\tis_empty: \"пуста\",\n\tis_not_empty: \"не пуста\",\n\tequal: \"роўныя\",\n\tnot_equal: \"не роўныя\",\n\tis_null: \"роўная нуля\",\n\tis_not_null: \"не роўная нуля\",\n\tdefault_option: \"---\",\n\tcancel: \"адмяніць\",\n\tfilter: \"фільтраваць\",\n\tsort: \"сартаваць\"\n};\n\nexport default locale;","const locale = {\n\tor: \"Or\",\n\tand: \"And\",\n\tdelete_rule: \"Delete rule\",\n\tadd_rule: \"Add rule\",\n\tadd_group: \"Add group\",\n\tless: \"less\",\n\tless_or_equal: \"less or equal\",\n\tgreater: \"greater\",\n\tgreater_or_equal: \"greater or equal\",\n\tbetween: \"between\",\n\tnot_between: \"not between\",\n\tbegins_with: \"begins with\",\n\tnot_begins_with: \"not begins with\",\n\tcontains: \"contains\",\n\tnot_contains: \"not contains\",\n\tends_with: \"ends with\",\n\tnot_ends_with: \"not ends with\",\n\tis_empty: \"is empty\",\n\tis_not_empty: \"is not empty\",\n\tequal: \"equal\",\n\tnot_equal: \"not equal\",\n\tis_null: \"is null\",\n\tis_not_null: \"is not null\",\n\tdefault_option: \"---\",\n\tcancel: \"Cancel\",\n\tfilter: \"Filter\",\n\tsort:\"Sort\",\n\tsortby: \"Sort by\",\n\tasc:\"asc\",\n\tdesc:\"desc\"\n};\n\nexport default locale;","import be from \"./be\";\nimport de from \"./de\";\nimport en from \"./en\";\nimport es from \"./es\";\nimport fr from \"./fr\";\nimport it from \"./it\";\nimport ja from \"./ja\";\nimport pt from \"./pt\";\nimport ru from \"./ru\";\nimport zh from \"./zh\";\n\nfunction setLocale(locale, name){\n\tvar lang = webix.i18n.locales[name];\n\tif (lang)\n\t\tlang.querybuilder = locale;\n}\n\nsetLocale(be, \"be-BY\");\nsetLocale(de, \"de-DE\");\nsetLocale(en, \"en-US\");\nsetLocale(es, \"es-ES\");\nsetLocale(fr, \"fr-FR\");\nsetLocale(it, \"it-IT\");\nsetLocale(ja, \"ja-JP\");\nsetLocale(pt, \"pt-BR\");\nsetLocale(ru, \"ru-RU\");\nsetLocale(zh, \"zh-CN\");\n\nwebix.i18n.querybuilder = en;","/*German (Germany) locale*/\nconst locale = {\n\tor: \"oder\",\n\tand: \"und\",\n\tdelete_rule: \"Regel löschen\",\n\tadd_rule: \"Regel hinzufügen\",\n\tadd_group: \"Gruppe hinzufügen\",\n\tless: \"weniger\",\n\tless_or_equal: \"weniger oder gleich\",\n\tgreater: \"mehr\",\n\tgreater_or_equal: \"größer oder gleich\",\n\tbetween: \"zwischen\",\n\tnot_between: \"nicht zwischen\",\n\tbegins_with: \"beginnt mit\",\n\tnot_begins_with: \"nicht beginnt mit\",\n\tcontains: \"enthält\",\n\tnot_contains: \"nicht enthält\",\n\tends_with: \"endet mit\",\n\tnot_ends_with: \"nicht endet mit\",\n\tis_empty: \"ist leer\",\n\tis_not_empty: \"es ist nicht leer\",\n\tequal: \"gleich\",\n\tnot_equal: \"ungleich\",\n\tis_null: \"ist null\",\n\tis_not_null: \"es ist nicht null\",\n\tdefault_option: \"---\",\n\tcancel: \"Stornieren\",\n\tfilter: \"Filter\",\n\tsort: \"Sortieren\"\n};\n\nexport default locale;","const locale = {\n\tor: \"o\",\n\tand: \"y\",\n\tdelete_rule: \"Borrar regla\",\n\tadd_rule: \"Añadir regla\",\n\tadd_group: \"Añadir grupo\",\n\tless: \"menos\",\n\tless_or_equal: \"menor o igual\",\n\tgreater: \"mayor\",\n\tgreater_or_equal: \"mayor o igual\",\n\tbetween: \"entre\",\n\tnot_between: \"no entre\",\n\tbegins_with: \"comienza con\",\n\tnot_begins_with: \"no comienza con\",\n\tcontains: \"contiene\",\n\tnot_contains: \"not contiene\",\n\tends_with: \"termina con\",\n\tnot_ends_with: \"no termina con\",\n\tis_empty: \"está vacía\",\n\tis_not_empty: \"no está vacía\",\n\tequal: \"igual\",\n\tnot_equal: \"no es igual\",\n\tis_null: \"es nulo\",\n\tis_not_null: \"no es nulo\",\n\tdefault_option: \"---\",\n\tcancel: \"Cancelar\",\n\tfilter: \"Filtrar\",\n\tsort: \"Ordenar\"\n};\n\nexport default locale;","const locale = {\n\tor: \"ou\",\n\tand: \"et\",\n\tdelete_rule: \"Supprimer la règle\",\n\tadd_rule: \"Ajouter une règle\",\n\tadd_group: \"Ajouter un groupe\",\n\tless: \"moins\",\n\tless_or_equal: \"inférieur ou égal\",\n\tgreater: \"plus grand\",\n\tgreater_or_equal: \"supérieur ou égal\",\n\tbetween: \"entre\",\n\tnot_between: \"pas entre\",\n\tbegins_with: \"commence par\",\n\tnot_begins_with: \"ne commence par\",\n\tcontains: \"contient\",\n\tnot_contains: \"ne contient\",\n\tends_with: \"se termine par\",\n\tnot_ends_with: \"pas se termine par\",\n\tis_empty: \"est vide\",\n\tis_not_empty: \"Il n'est pas vide\",\n\tequal: \"égal\",\n\tnot_equal: \"pas égal\",\n\tis_null: \"est nulle\",\n\tis_not_null: \"Il est non nul\",\n\tdefault_option: \"---\",\n\tcancel: \"Annuler\",\n\tfilter: \"Filtre\",\n\tsort: \"Trier\"\n};\n\nexport default locale;","const locale = {\n\tor: \"o\",\n\tand: \"e\",\n\tdelete_rule: \"Elimina la regola\",\n\tadd_rule: \"Aggiungi regola\",\n\tadd_group: \"Aggiungere gruppo\",\n\tless: \"meno\",\n\tless_or_equal: \"minore o uguale\",\n\tgreater: \"maggiore\",\n\tgreater_or_equal: \"maggiore o uguale\",\n\tbetween: \"tra\",\n\tnot_between: \"non tra\",\n\tbegins_with: \"inizia con\",\n\tnot_begins_with: \"non inizia con\",\n\tcontains: \"contiene\",\n\tnot_contains: \"non contiene\",\n\tends_with: \"finisce con\",\n\tnot_ends_with: \"non termina con\",\n\tis_empty: \"è vuoto\",\n\tis_not_empty: \"non è vuota\",\n\tequal: \"uguale\",\n\tnot_equal: \"non uguale\",\n\tis_null: \"è nullo\",\n\tis_not_null: \"non è nullo\",\n\tdefault_option: \"---\",\n\tcancel: \"Annulla\",\n\tfilter: \"Filtro\",\n\tsort: \"Ordinare\"\n};\n\nexport default locale;","const locale = {\n\tor: \"または\",\n\tand: \"そして\",\n\tdelete_rule: \"ルールを削除する\",\n\tadd_rule: \"ルールを追加\",\n\tadd_group: \"グループを追加\",\n\tless: \"レス\",\n\tless_or_equal: \"以下\",\n\tgreater: \"大きいです\",\n\tgreater_or_equal: \"以上\",\n\tbetween: \"間に\",\n\tnot_between: \"いない間\",\n\tbegins_with: \"で始まります\",\n\tnot_begins_with: \"ないで始まります\",\n\tcontains: \"含まれています\",\n\tnot_contains: \"含まれていません\",\n\tends_with: \"で終わります\",\n\tnot_ends_with: \"で終わりではありません\",\n\tis_empty: \"空であります\",\n\tis_not_empty: \"それは空でありません\",\n\tequal: \"等しいです\",\n\tnot_equal: \"等しくありません\",\n\tis_null: \"ブランクである\",\n\tis_not_null: \"ブランクではない\",\n\tdefault_option: \"---\",\n\tcancel: \"キャンセル\",\n\tfilter: \"フィルタ\",\n\tsort: \"ソート\"\n};\n\nexport default locale;","const locale = {\n\tor: \"ou\",\n\tand: \"e\",\n\tdelete_rule: \"Excluir regra\",\n\tadd_rule: \"Adicionar regra\",\n\tadd_group: \"Adicionar grupo\",\n\tless: \"menos\",\n\tless_or_equal: \"menor ou igual\",\n\tgreater: \"maior\",\n\tgreater_or_equal: \"maior ou igual\",\n\tbetween: \"entre\",\n\tnot_between: \"não entre\",\n\tbegins_with: \"começa com\",\n\tnot_begins_with: \"não começa com\",\n\tcontains: \"contém\",\n\tnot_contains: \"não contém\",\n\tends_with: \"termina com\",\n\tnot_ends_with: \"não termina com\",\n\tis_empty: \"está vazia\",\n\tis_not_empty: \"não é vazia\",\n\tequal: \"igual\",\n\tnot_equal: \"não é igual\",\n\tis_null: \"é nulo\",\n\tis_not_null: \"não é nula\",\n\tdefault_option: \"---\",\n\tcancel: \"Cancelar\",\n\tfilter: \"Filtro\",\n\tsort: \"Ordenar\"\n};\n\nexport default locale;","const locale = {\n\tor: \"или\",\n\tand: \"и\",\n\tdelete_rule: \"Удалить правило\",\n\tadd_rule: \"Добавить правило\",\n\tadd_group: \"Добавить группу\",\n\tless: \"меньше\",\n\tless_or_equal: \"меньше или равно\",\n\tgreater: \"больше\",\n\tgreater_or_equal: \"больше или равно\",\n\tbetween: \"между\",\n\tnot_between: \"не между\",\n\tbegins_with: \"начинается с\",\n\tnot_begins_with: \"не начинается с\",\n\tcontains: \"содержит\",\n\tnot_contains: \"не содержит\",\n\tends_with: \"заканчиватся\",\n\tnot_ends_with: \"не заканчиватся\",\n\tis_empty: \"пусто\",\n\tis_not_empty: \"не пусто\",\n\tequal: \"равно\",\n\tnot_equal: \"не равно\",\n\tis_null: \"равно нулю\",\n\tis_not_null: \"не равно нулю\",\n\tdefault_option: \"---\",\n\tcancel: \"Отменить\",\n\tfilter: \"Фильтровать\",\n\tsort: \"Сортировать\"\n};\n\nexport default locale;","const locale = {\n\tor: \"要么\",\n\tand: \"和\",\n\tdelete_rule: \"删除规则\",\n\tadd_rule: \"添加规则\",\n\tadd_group: \"添加组\",\n\tless: \"减\",\n\tless_or_equal: \"少于或等于\",\n\tgreater: \"更大\",\n\tgreater_or_equal: \"大于或等于\",\n\tbetween: \"之间\",\n\tnot_between: \"不在之间\",\n\tbegins_with: \"开始于\",\n\tnot_begins_with: \"不开始\",\n\tcontains: \"包含\",\n\tnot_contains: \"不包含\",\n\tends_with: \"结束\",\n\tnot_ends_with: \"不是以\",\n\tis_empty: \"是空的\",\n\tis_not_empty: \"不是空的\",\n\tequal: \"等于\",\n\tnot_equal: \"不平等\",\n\tis_null: \"为空\",\n\tis_not_null: \"不为空\",\n\tdefault_option: \"---\",\n\tcancel: \"取消\",\n\tfilter: \"过滤\",\n\tsort: \"分类\"\n};\n\nexport default locale;","webix.protoUI({\n\tname: \"querybuilderline\",\n\tdefaults: {\n\t\tpadding: 0, margin: 10, borderless: true\n\t},\n\t$init(config) {\n\t\tconst locale = webix.i18n.querybuilder;\n\n\t\tthis.config.value = {};\n\t\tthis.$view.className += \" webix_qb_line\";\n\t\tconst keyoptions = [\n\t\t\t...config.fields\n\t\t];\n\n\t\tconst elements = [\n\t\t\tthis._selectConfig(config, \"webix_qb_value_select\", \"key\", keyoptions),\n\t\t\tthis._selectConfig(config, \"webix_qb_rule_select\", \"rule\", { body:{ data:[], template:\"#name#\"}}, true),\n\t\t\t{view:\"button\", type:\"htmlbutton\", css:\"webix_qb_close\", width:26, inputWidth:26, name:\"close\",\n\t\t\t\tlabel: `<span class=\"webix_icon wxi-trash\" title=\"${locale.delete_rule}\"></span>`, click:() => {\n\t\t\t\t\tthis._getParentQuery()._deleteRow(this);\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\tif (config.columnMode){\n\t\t\tconfig.css = (config.css || \"\") + \" webix_column_qb\";\n\t\t\tconfig.margin = config.margin || 0;\n\t\t\tconfig.rows = elements;\n\t\t} else {\n\t\t\telements.push({gravity: 0.001});\n\t\t\tconfig.cols = elements;\n\t\t}\n\n\t},\n\t_selectConfig(config, css, name, options, hidden){\n\t\tconst select = {\n\t\t\tview: \"richselect\",\n\t\t\tminWidth:100,\n\t\t\tmaxWidth: config.inputMaxWidth,\n\t\t\tinputPadding: 0,\n\t\t\toptions,\n\t\t\thidden,\n\t\t\tcss,\n\t\t\tname,\n\t\t\ton:{\n\t\t\t\tonChange: () => this._onChange(name)\n\t\t\t}\n\t\t};\n\n\t\treturn select;\n\t},\n\t_inputConfig(config, type, value, hidden){\n\t\tlet input;\n\t\tif (typeof type === \"string\"){\n\t\t\tinput = {\n\t\t\t\tview:type\n\t\t\t};\n\t\t} else {\n\t\t\tinput = webix.copy(type);\n\t\t}\n\n\t\tinput.name=\"value\";\n\t\tinput.maxWidth=config.inputMaxWidth;\n\t\tinput.value=value;\n\t\tinput.on = {\n\t\t\tonChange: () => this._onChange(\"value\")\n\t\t};\n\t\tinput.hidden= hidden;\n\n\t\tif (type === \"rangeslider\"){\n\t\t\tinput.min = 0;\n\t\t\tinput.max = 100;\n\t\t\tinput.value = [0, 100];\n\t\t\tinput.moveTitle = false;\n\t\t\tinput.title = obj => {\n\t\t\t\tconst v = obj.value;\n\t\t\t\treturn (v[0] === v[1] ? v[0] : v[0] + \" - \" + v[1]);\n\t\t\t};\n\t\t}\n\n\t\treturn input;\n\t},\n\tgetValue() {\n\t\tvar state = this.config.value;\n\t\tif (state.rule && (\n\t\t\tstate.value !== \"\" ||\n\t\t\tstate.rule === \"equal\" ||\n\t\t\tstate.rule === \"not_equal\" ||\n\t\t\t!this.elements.value\n\t\t))\n\t\t\treturn this.config.value;\n\t\treturn null;\n\t},\n\tsetValue(value) {\n\t\tthis.config.value = value;\n\t\tthis._silent = true;\n\n\t\tif (value && value.key){\n\t\t\tthis.elements.key.setValue(value.key);\n\t\t\tif (value.rule){\n\t\t\t\tthis.elements.rule.setValue(value.rule);\n\t\t\t\tif (value.value)\n\t\t\t\t\tthis.elements.value.setValue(value.value);\n\t\t\t}\n\t\t}\n\t\tthis._silent = false;\n\t},\n\t_onChange(key) {\n\t\tvar select = this.elements[key];\n\t\tvar value = this.config.value;\n\n\t\tvalue[key] = select.getValue();\n\t\tthis._adjustVisible(key, value);\n\n\t\tif (!this._silent){\n\t\t\tthis._getTopQuery().callEvent(\"onChange\", [this]);\n\t\t\tthis._getTopQuery().callEvent(\"onKeySelect\", [this]);\n\t\t}\n\t},\n\t_adjustVisible(type, data){\n\t\tconst field = this.elements.key.getList().getItem(data.key);\n\t\tconst rule = this.elements.rule;\n\t\tlet value = this.elements.value;\n\n\t\tif (type === \"key\"){\n\t\t\tthis._updateRuleField(data, field, rule, value);\n\t\t} else if (type === \"rule\"){\n\t\t\tthis._updateValueField(data, field, rule, value);\n\t\t}\n\t},\n\t_fillRules(field, rule){\n\t\tconst filters = this.config.filters;\n\t\tfilters.filter(a => {\n\t\t\treturn a.type[field.type] || a.type[\"any\"];\n\t\t});\n\t\trule.getList().data.importData(filters.data);\n\t},\n\t_updateRuleField(data, field, rule, value){\n\t\tconst oldrule = rule.getValue();\n\t\tconst filter = oldrule ? rule.getList().getItem(oldrule).type : \"\";\n\n\t\tif (!this._silent && !filter[field.type])\n\t\t\tdata.rule = data.value = \"\";\n\n\t\tif (data.key){\n\t\t\trule.show();\n\t\t\tthis._fillRules(field, rule);\n\t\t\trule.setValue(data.rule);\n\n\t\t\tthis._updateValueField(data, field, rule, this.elements.value);\n\t\t} else {\n\t\t\trule.hide();\n\t\t\tif (value)\n\t\t\t\tvalue.hide();\n\t\t}\n\t},\n\t_updateValueField(data, field, rule, value){\n\t\tif (data.rule){\n\t\t\tlet filter = rule.getList().getItem(data.rule);\n\t\t\tlet editor = filter.type[field.type] || filter.type[\"any\"];\n\t\t\t\n\t\t\tif (value && editor === value.name){\n\t\t\t\tvalue.show();\n\t\t\t\tvalue.setValue(data.value);\n\t\t\t} else {\n\t\t\t\tif (!this._silent)\n\t\t\t\t\tdata.value = \"\";\n\t\t\t\tif (value)\n\t\t\t\t\tthis.removeView(value);\n\t\t\t\tif (editor !== \"none\"){\n\t\t\t\t\tthis.addView(this._inputConfig(this.config, editor, data.value), 2);\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this._silent)\n\t\t\t\tdata.value = \"\";\n\t\t\tif (value)\n\t\t\t\tvalue.hide();\n\t\t}\n\t},\n\t_getParentQuery() {\n\t\treturn this.queryView({ view:\"querybuilder\" }, \"parent\");\n\t},\n\t_getTopQuery(){\n\t\treturn this._getParentQuery()._getTopQuery();\n\t},\n\tgetFilterHelper() {\n\t\tconst data = this.config.value;\n\t\tif (!this.getValue()) return null;\n\n\t\tconst filter = this.elements.rule.getList().getItem(data.rule);\n\t\treturn  obj => filter.fn(obj[data.key], data.value);\n\t}\n},  webix.ui.form, webix.EventSystem);","const sort = {\n\t_init_sorting:function(){\n\t\tif(!this.config.sorting) return;\n\n\t\tconst locale = webix.i18n.querybuilder;\n\t\tthis.$view.innerHTML = \"<div class='webix_qb_sorting'></div>\";\n\n\t\tthis._sortby = webix.ui({\n\t\t\tview:\"multiselect\",\n\t\t\tlabel:locale.sortby,\n\t\t\tcontainer:this.$view.childNodes[0],\n\t\t\tsuggest: {\n\t\t\t\tbody:{\n\t\t\t\t\tdata: this.config.fields\n\t\t\t\t}\n\t\t\t},\n\t\t\talign: \"right\",\n\t\t\twidth: 300,\n\t\t\tlabelWidth: 57,\n\t\t\ton: {\n\t\t\t\tonChange: () => {\n\t\t\t\t\tthis._callChangeMethod();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis._sortorder = webix.ui(this._sortSelect = {\n\t\t\tview:\"richselect\",\n\t\t\tcontainer:this.$view.childNodes[0],\n\t\t\toptions:[{ id:\"asc\", value:locale.asc}, { id:\"desc\", value:locale.desc}],\n\t\t\tvalue:\"asc\",\n\t\t\twidth: 80,\n\t\t\ton: {\n\t\t\t\tonChange: () => {\n\t\t\t\t\tif(this._getSortingValues().sortBy) {\n\t\t\t\t\t\tthis._callChangeMethod();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.attachEvent(\"onDestruct\", function(){\n\t\t\tthis._sortby.destructor();\n\t\t\tthis._sortorder.destructor();\n\t\t});\n\t},\n\t_getSortingValues() {\n\t\treturn { sortBy: this._sortby.getValue(), sortAs: this._sortorder.getValue() };\n\t},\n\t_setSortingValues(value) {\n\t\tif (value.fields){\n\t\t\tvar list = this._sortby.getList();\n\t\t\tlist.clearAll();\n\t\t\tlist.parse(value.fields);\n\t\t}\n\n\t\tthis._sortby.setValue(value.sortBy);\n\t\tthis._sortorder.setValue(value.sortAs);\n\t},\n\tgetSortingElements(){\n\t\treturn [this._sortby, this._sortorder];\n\t},\n\tgetSortingHelper() {\n\t\tvar state = this._getSortingValues();\n\t\tif (!state.sortBy) return null;\n\t\t\n\t\tlet values = state.sortBy.split(\",\").map(id => {\n\t\t\tvar item = this._sortby.getList().getItem(id);\n\t\t\tvar type = item.type;\n\t\t\tif (type === \"number\") type = \"int\";\n\n\t\t\treturn { \n\t\t\t\tby: function(obj){ return obj[id]; },\n\t\t\t\tas: webix.DataStore.prototype.sorting.as[type]\n\t\t\t};\n\t\t});\n\t\t\n\t\treturn function(obj1, obj2){\n\t\t\tvar order;\n\t\t\tfor (var i=0; i<values.length; i++){\n\t\t\t\tvar sorter = values[i];\n\t\t\t\tvar a = sorter.by(obj1);\n\t\t\t\tvar b = sorter.by(obj2);\n\t\t\t\torder = sorter.as(a, b);\n\t\t\t\tif (order !== 0) break;\n\t\t\t}\n\n\t\t\treturn order * ((state.sortAs === \"asc\") ? 1 : -1);\n\t\t};\n\t}\n};\n\nexport default sort;","const text = { \"any\" : \"text\", \"number\" : \"text\", \"date\" : \"datepicker\" };\nconst range = { \"number\" : \"rangeslider\", \"date\" : \"daterangepicker\" };\nconst str = { \"string\" : \"text\" };\n\nfunction filters(){\n\tconst locale = webix.i18n.querybuilder;\n\tconst prepare = (v) => typeof v == \"number\" ? v.toString() : v;\n\n\treturn [\n\t\t{id: \"less\", name:  locale.less, fn: (a, b) => a < b, type: text },\n\t\t{id: \"less_or_equal\", name: locale.less_or_equal, fn: (a, b) => a <= b, type: text  },\n\t\t{id: \"greater\", name: locale.greater, fn: (a, b) => a > b, type: text },\n\t\t{id: \"greater_or_equal\", name: locale.greater_or_equal, fn: (a, b) => a >= b, type: text },\n\t\t{id: \"between\", name: locale.between, fn: (a, b, c) => (!b || a > b) && (!c || a < c), type: range },\n\t\t{id: \"not_between\", name: locale.not_between, fn: (a, b, c) => (!b || a <= b) || (!c || a >= c), type: range },\n\t\t{id: \"begins_with\", name: locale.begins_with, fn: (a, b) => a.lastIndexOf(b, 0) === 0, type: str},\n\t\t{id: \"not_begins_with\", name: locale.not_begins_with, fn: (a, b) => a.lastIndexOf(b, 0) !== 0, type: str},\n\t\t{id: \"contains\", name: locale.contains, fn: (a, b) => a.indexOf(b) !== -1, type: str},\n\t\t{id: \"not_contains\", name: locale.not_contains, fn: (a, b) => a.indexOf(b) === -1, type: str},\n\t\t{id: \"ends_with\", name: locale.ends_with, fn: (a, b) => a.indexOf(b, a.length - b.length) !== -1, type: str},\n\t\t{id: \"not_ends_with\", name: locale.not_ends_with, fn: (a, b) => a.indexOf(b, a.length - b.length) === -1, type: str},\n\t\t{id: \"is_empty\", name: locale.is_empty, fn: (a) => a.length === 0, type: { \"string\": \"none\" }},\n\t\t{id: \"is_not_empty\", name: locale.is_not_empty, fn: (a) => a.length > 0, type: { \"string\": \"none\" }},\n\t\t{id: \"equal\", name: locale.equal, fn: (a, b) => prepare(a) == prepare(b), type: { any : \"text\", \"date\" : \"datepicker\" }},\n\t\t{id: \"not_equal\", name: locale.not_equal, fn: (a, b) =>  prepare(a) != prepare(b), type: { any : \"text\", \"date\" : \"datepicker\" }},\n\t\t{id: \"is_null\", name: locale.is_null, fn: (a) => a === null, type: { \"any\" : \"none\" }},\n\t\t{id: \"is_not_null\", name: locale.is_not_null, fn: (a) => a !== null, type: { \"any\" : \"none\" }}\n\t];\n}\n\nexport default filters;","const sql = {\n\t$init(){\n\t\tthis.config.sqlDateFormat = this.config.sqlDateFormat || webix.Date.dateToStr(\"%Y-%m-%d %H:%i:%s\", false);\n\t},\n\tsqlOperators: {\n\t\tequal:            { op: \"= ?\" },\n\t\tnot_equal:        { op: \"!= ?\" },\n\t\tless:             { op: \"< ?\" },\n\t\tless_or_equal:    { op: \"<= ?\" },\n\t\tgreater:          { op: \"> ?\" },\n\t\tgreater_or_equal: { op: \">= ?\" },\n\t\tbetween:          { op: \"BETWEEN ?\",      sep: \" AND \" },\n\t\tnot_between:      { op: \"NOT BETWEEN ?\",  sep: \" AND \" },\n\t\tbegins_with:      { op: \"LIKE(?)\",        mod: \"{0}%\" },\n\t\tnot_begins_with:  { op: \"NOT LIKE(?)\",    mod: \"{0}%\" },\n\t\tcontains:         { op: \"LIKE(?)\",        mod: \"%{0}%\" },\n\t\tnot_contains:     { op: \"NOT LIKE(?)\",    mod: \"%{0}%\" },\n\t\tends_with:        { op: \"LIKE(?)\",        mod: \"%{0}\" },\n\t\tnot_ends_with:    { op: \"NOT LIKE(?)\",    mod: \"%{0}\" },\n\t\tis_empty:         { op: \"= \\\"\\\"\", no_val: true },\n\t\tis_not_empty:     { op: \"!= \\\"\\\"\", no_val: true },\n\t\tis_null:          { op: \"IS NULL\", no_val: true },\n\t\tis_not_null:      { op: \"IS NOT NULL\", no_val: true }\n\t},\n\ttoSQL(config) {\n\t\tconfig = config || this.getValue();\n\t\t\n\t\tconst values = [];\n\t\tconst code = this._getSqlString(config, values, false);\n\t\tconst sql = this._placeValues(code, values);\n\t\treturn { code, sql, values };\n\t},\n\t_placeValues(code, values){\n\t\tlet index = 0;\n\t\treturn code.replace(/\\?/g, function(){\n\t\t\tconst value = values[index++];\n\t\t\tif (typeof value === \"string\")\n\t\t\t\treturn `\"${value}\"`;\n\t\t\telse\n\t\t\t\treturn value;\n\t\t});\n\t},\n\t_getSqlString(config, values, nested) {\n\t\tif(!config) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (config.rules && config.rules.length){\n\t\t\tlet sql = config.rules.map(a => this._getSqlString(a, values, true)).join(\" \"+config.glue.toUpperCase()+\" \");\n\t\t\tif (nested){\n\t\t\t\tsql = `( ${sql} )`;\n\t\t\t}\n\t\t\treturn sql;\n\t\t}\n\t\treturn this._convertValueToSql(config, values);\n\t},\n\t_convertValueToSql(el, values) {\n\t\tconst format = this.config.sqlDateFormat;\n\t\tconst value = el.value;\n\n\t\tvar match = this.sqlOperators[el.rule];\n\t\tif (match){\n\t\t\tlet operator = this.sqlOperators[el.rule];\n\t\t\t\n\t\t\tif(!operator.no_val) {\n\t\t\t\tif(operator.mod) {\n\t\t\t\t\tvalues.push( operator.mod.replace(\"{0}\", `${value}`) );\n\t\t\t\t} else {\n\t\t\t\t\tif(Array.isArray(value)) {\n\t\t\t\t\t\tvalues.push(value[0]);\n\t\t\t\t\t\tvalues.push(value[1]);\n\t\t\t\t\t} else if (value.start || value.end){\n\t\t\t\t\t\tvalues.push(format(value.start));\n\t\t\t\t\t\tvalues.push(format(value.end));\n\t\t\t\t\t} else if(value instanceof Date){\n\t\t\t\t\t\tvalues.push( format(value) );\n\t\t\t\t\t} else\n\t\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet glue = operator.op;\n\t\t\tif (operator.sep)\n\t\t\t\tglue = glue.replace(\"?\", `?${operator.sep}?`);\n\n\t\t\treturn `${el.key} ${glue} `;\n\t\t}\n\n\t\treturn \"\";\n\t}\n};\n\nexport default sql;","import \"./querybuilderline\";\n\nimport sort from \"../modules/sort\";\nimport filters from \"../modules/filters\";\nimport sql from \"../modules/sql\";\n\nconst qb = {\n\tname: \"querybuilder\",\n\tdefaults: {\n\t\ttype: \"space\",\n\t\tborderless: true,\n\n\t\tfields: [],\n\t\tsorting: false,\n\t\tfiltering: true,\n\t\tglue: \"and\",\n\n\t\tcolumnMode: false,\n\t\tmaxLevel: 999,\n\t\tinputMaxWidth: 210\n\t},\n\t$init(config) {\n\t\tconfig.filters = config.filters || filters();\n\t\tif (config.filters && !config.filters.add)\n\t\t\tconfig.filters = new webix.DataCollection({ data: config.filters });\n\n\t\tthis.$view.className += \" webix_qb_wrap\";\n\t\tthis.$ready.unshift(this._setLayout);\n\t},\n\t_setLayout() {\n\t\tlet levelIndicator = this.config.maxLevel > 1 ? true:false;\n\t\tconst locale = webix.i18n.querybuilder;\n\n\t\tlet cols = [{\n\t\t\t$id:\"buttons\",\n\t\t\tborderless: true,\n\t\t\ttemplate:() => {\n\t\t\t\tconst and = this.config.glue === \"and\";\n\t\t\t\treturn `\n<div class=\"webix_qb_buttons\">\n<button class=\"webix_qb_and${and?\" webix_active\":\"\"}\">${locale.and}</button>\n<button class=\"webix_qb_or ${!and?\" webix_active\":\"\"}\">${locale.or}</button>\n</div>`;\n\t\t\t},\n\t\t\tonClick:{\n\t\t\t\twebix_qb_and: () => this._updateGlue(\"and\"),\n\t\t\t\twebix_qb_or: () => this._updateGlue(\"or\")\n\t\t\t},\n\t\t\tminHeight:35,\n\t\t\twidth: 87,\n\t\t},\n\t\t{\n\t\t\t$id:\"rows\",\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tborderless: true,\n\t\t\t\t\ttemplate: `\n<div class=\"webix_qb_add\">\n${levelIndicator?`<button class=\"webix_qb_add_group\">+ ${locale.add_group}</button>`:\"\"}\n<button class=\"webix_qb_add_rule\">+ ${locale.add_rule}</button>\n</div>`,\n\t\t\t\t\tonClick: {\n\t\t\t\t\t\twebix_qb_add_rule:() => this._addRule(),\n\t\t\t\t\t\twebix_qb_add_group:() => this._addGroup(true)\n\t\t\t\t\t},\n\t\t\t\t\theight: 22,\n\t\t\t\t\tminWidth: 220\n\t\t\t\t}],\n\t\t\tmargin: 5\n\t\t}];\n\n\t\tthis._init_sorting();\n\n\t\tif (this.config.filtering === false){\n\t\t\tthis.config.padding = 0;\n\t\t\tthis.cols_setter([{ height: 1}]);\n\t\t} else {\n\t\t\tthis.cols_setter(cols);\n\t\t}\n\t},\n\t_updateGlue(mode){\n\t\tthis.config.glue = mode;\n\t\tthis.queryView({$id:\"buttons\"}).refresh();\n\t\tthis._callChangeMethod();\n\t},\n\t_addRow(ui) {\n\t\tlet layout = this.queryView({$id:\"rows\"});\n\t\tlet kids = layout.getChildViews();\n\t\treturn webix.$$(layout.addView(ui, kids.length-1));\n\t},\n\t_deleteRow(el) {\n\t\tlet layout = this.queryView({$id:\"rows\"});\n\t\tlayout.removeView(el);\n\t\tthis._callChangeMethod();\n\n\t\tif (layout.getChildViews().length <= 1) {\n\t\t\tconst parent = this._getParentQuery();\n\t\t\tif (parent){\n\t\t\t\tparent._deleteRow(this.config.id);\n\t\t\t}\n\t\t}\n\t},\n\t_addRule() {\n\t\tconst line = this._addRow({\n\t\t\tview: \"querybuilderline\",\n\n\t\t\tinputMaxWidth: this.config.inputMaxWidth,\n\t\t\tfields: this.config.fields,\n\t\t\tfilters: this.config.filters,\n\n\t\t\tcolumnMode: this.config.columnMode\n\t\t});\n\n\t\treturn line;\n\t},\n\t_addGroup(withRow) {\n\t\tlet newView = this._addRow({\n\t\t\tview: \"querybuilder\",\n\n\t\t\tinputMaxWidth: this.config.inputMaxWidth,\n\t\t\tfields: this.config.fields,\n\t\t\tfilters: this.config.filters,\n\n\t\t\tcolumnMode: this.config.columnMode,\n\t\t\tmaxLevel:this.config.maxLevel-1\n\t\t});\n\n\t\tif (withRow){\n\t\t\tnewView._addRule();\n\t\t}\n\t\treturn newView;\n\t},\n\t_getParentQuery() {\n\t\treturn  this.queryView({ view:this.config.view }, \"parent\");\n\t},\n\t_getTopQuery(){\n\t\tlet parent, now = this;\n\t\twhile((parent = now._getParentQuery())){\n\t\t\tnow = parent;\n\t\t}\n\t\treturn now;\n\t},\n\t_callChangeMethod() {\n\t\tthis._getTopQuery().callEvent(\"onChange\", []);\n\t},\n\t\n\t$getSize(dx, dy){\n\t\tif(this.config.sorting && !this.config.filtering){\n\t\t\tdy = dy+50;\n\t\t}\n\t\treturn webix.ui.layout.prototype.$getSize.call(this, dx, dy);\n\t},\n\t_setRules(rules) {\n\t\tif (rules) {\n\t\t\trules.forEach(el => {\n\t\t\t\tlet rule;\n\t\t\t\tif (!el.glue) {\n\t\t\t\t\trule = this._addRule();\n\t\t\t\t} else {\n\t\t\t\t\trule = this._addGroup();\n\t\t\t\t}\n\t\t\t\twebix.$$(rule).setValue(el);\n\t\t\t});\n\t\t}\n\t},\n\teachLine(cb){\n\t\tvar rows = this.queryView({$id:\"rows\"}).getChildViews();\n\t\tfor (var i=0; i<rows.length; i++) {\n\t\t\tif (rows[i].getFilterHelper)\n\t\t\t\tcb(rows[i]);\n\t\t}\n\t},\n\tgetValue() {\n\t\tconst rules = [];\n\t\tthis.eachLine(a => {\n\t\t\tconst line = a.getValue();\n\t\t\tif (line)\n\t\t\t\trules.push(line);\n\t\t});\n\n\t\tif(rules.length) {\n\t\t\treturn {glue: this.config.glue, rules};\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t},\n\tsetValue(value) {\n\t\tif (value.fields){\n\t\t\tthis.config.fields = value.fields;\n\t\t}\n\n\t\tif (value.query){\n\t\t\tvalue = value.query;\n\t\t}\n\n\t\tif (value.glue){\n\t\t\tthis.config.glue = value.glue;\n\t\t}\n\n\t\tthis.reconstruct();\n\t\tif (value.rules){\n\t\t\tthis._setRules(value.rules);\n\t\t}\n\n\t\tthis.queryView({ $id: \"buttons\" }).refresh();\n\n\t\tif (this.config.sorting){\n\t\t\tthis._setSortingValues(value);\n\t\t}\n\n\t\tthis._callChangeMethod();\n\t},\n\tfocus() {\n\t\tconst line = this.queryView({ view:\"querybuilderline\" });\n\t\tif (line) line.focus();\n\t},\n\n\tgetFilterHelper() {\n\t\tlet childsArr = [];\n\t\tlet glue = this.config.glue;\n\n\t\tthis.eachLine(a => {\n\t\t\tvar sub = a.getFilterHelper();\n\t\t\tif (sub)\n\t\t\t\tchildsArr.push(sub);\n\t\t});\n\n\t\tif(!childsArr.length)\n\t\t\treturn () => true;\n\n\t\treturn obj => {\n\t\t\tlet result;\n\t\t\tif (glue === \"and\") {\n\t\t\t\tresult = true;\n\t\t\t\tchildsArr.forEach(function(item) {\n\t\t\t\t\tif (!item(obj)) {\n\t\t\t\t\t\tresult = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresult = false;\n\t\t\t\tchildsArr.forEach(function(item) {\n\t\t\t\t\tif (item(obj)) {\n\t\t\t\t\t\tresult = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t}\n};\n\nwebix.protoUI(qb, sort, sql, webix.ui.layout, webix.EventSystem);","function _buttonCreate(label, click, type) {\n\treturn {\n\t\tview:\"button\",\n\t\tvalue:label,\n\t\talign: \"right\",\n\t\twidth:120,\n\t\ttype,\n\t\tclick\n\t};\n}\n\nwebix.ui.datafilter.queryBuilder = webix.extend({\n\tgetValue(node) {\n\t\tlet master = webix.$$(node._comp_id);\n\t\treturn master.getValue();\n\t},\n\tsetValue(node, value) {\n\t\tlet master = webix.$$(node._comp_id);\n\t\tmaster.setValue(value);\n\t},\n\trefresh(master, node, value) {\n\t\tmaster.registerFilter(node, value, this);\n\t\tnode._comp_id = master._qb.config.id;\n\t\tlet qb = webix.$$(node._comp_id).getParentView();\n\n\t\tthis.setValue(node, value);\n\t\twebix.event(node, \"click\", () => this._filterShow(node, qb));\n\t},\n\trender(master, config) {\n\t\tconst locale = webix.i18n.querybuilder;\n\t\t\n\t\tconfig.css = \"webix_ss_filter\";\n\n\t\tlet filter;\n\t\tconfig.prepare = () => { filter = master._qb.getFilterHelper(); };\n\t\tconfig.compare = (v, i, o) => filter(o);\n\t\t\n\t\tlet qb = {\n\t\t\tview: \"querybuilder\"\n\t\t};\n\t\tif (config.queryConfig)\n\t\t\twebix.extend(qb, config.queryConfig);\n\n\t\tlet popupView;\n\t\tlet buttonSave = _buttonCreate(locale.filter, () => {\n\t\t\tif(master._qb) {\n\t\t\t\tlet helper = master._qb.getFilterHelper();\n\t\t\t\tmaster.filter(helper);\n\t\t\t\tpopupView.hide();\n\t\t\t}\n\t\t}, \"form\");\n\t\tlet buttonCancel = _buttonCreate(locale.cancel, () => {\n\t\t\tpopupView.hide();\n\t\t});\n\n\t\tlet body = {margin:5, rows:[qb, {cols:[ buttonSave, buttonCancel, {} ]}]};\n\t\tif(config.sorting) {\n\t\t\tbody.rows.push(_buttonCreate(locale.sort, () => {\n\t\t\t\tif(master._qb) {\n\t\t\t\t\tmaster.sort(master._qb.getSortingHelper());\n\t\t\t\t\tpopupView.hide();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tlet popup = {\n\t\t\tview:\"popup\",\n\t\t\twidth: 900,\n\t\t\tbody\n\t\t};\n\n\t\tif(config.popupConfig){\n\t\t\twebix.extend(popup, config.popupConfig, true);\n\t\t}\n\n\t\tpopupView = webix.ui(popup);\n\t\tmaster._qb = popupView.getBody().getChildViews()[0];\n\t\tmaster.attachEvent(\"onDestruct\", () => {\n\t\t\tpopupView.destructor();\n\t\t});\n\n\t\treturn \"<div class=\\\"webix_qb_filter\\\"><i class=\\\"webix_qb_filter_icon\\\" aria-hidden=\\\"true\\\"></i></div>\"+(config.label||\"\");\n\t},\n\t_filterShow(node, qb) {\n\t\tqb.show(node.querySelector(\".webix_qb_filter\"));\n\t}\n}, webix.EventSystem);\n"],"names":["locale","or","and","delete_rule","add_rule","add_group","less","less_or_equal","greater","greater_or_equal","between","not_between","begins_with","not_begins_with","contains","not_contains","ends_with","not_ends_with","is_empty","is_not_empty","equal","not_equal","is_null","is_not_null","default_option","cancel","filter","sort","sortby","asc","desc","setLocale","name","lang","webix","i18n","locales","querybuilder","en","protoUI","defaults","padding","margin","borderless","$init","config","value","$view","className","keyoptions","fields","elements","this","_selectConfig","body","data","template","view","type","css","width","inputWidth","label","click","_this","_getParentQuery","_deleteRow","columnMode","rows","push","gravity","cols","options","hidden","minWidth","maxWidth","inputMaxWidth","inputPadding","on","onChange","_this2","_onChange","_inputConfig","input","copy","_this3","min","max","moveTitle","title","obj","v","getValue","state","rule","setValue","_silent","key","select","_adjustVisible","_getTopQuery","callEvent","field","getList","getItem","_updateRuleField","_updateValueField","_fillRules","filters","a","importData","oldrule","show","hide","editor","removeView","addView","queryView","getFilterHelper","fn","ui","form","EventSystem","_init_sorting","sorting","innerHTML","_sortby","container","childNodes","suggest","align","labelWidth","_callChangeMethod","_sortorder","_sortSelect","id","_getSortingValues","sortBy","attachEvent","destructor","sortAs","_setSortingValues","list","clearAll","parse","getSortingElements","getSortingHelper","values","split","map","by","as","DataStore","prototype","obj1","obj2","order","i","length","sorter","b","text","range","str","sql","sqlDateFormat","Date","dateToStr","sqlOperators","op","sep","mod","no_val","toSQL","code","_getSqlString","_placeValues","index","replace","nested","rules","join","glue","toUpperCase","_convertValueToSql","el","format","operator","Array","isArray","start","end","qb","filtering","maxLevel","prepare","toString","c","lastIndexOf","indexOf","any","add","DataCollection","$ready","unshift","_setLayout","levelIndicator","$id","onClick","webix_qb_and","_updateGlue","webix_qb_or","minHeight","webix_qb_add_rule","_addRule","webix_qb_add_group","_addGroup","height","cols_setter","mode","refresh","_addRow","layout","kids","getChildViews","$$","parent","withRow","newView","now","$getSize","dx","dy","call","_setRules","forEach","eachLine","cb","line","query","reconstruct","focus","childsArr","sub","result","item","_buttonCreate","datafilter","queryBuilder","extend","node","_comp_id","master","registerFilter","_qb","getParentView","event","_filterShow","render","compare","o","popupView","queryConfig","helper","popup","popupConfig","getBody","querySelector"],"mappings":"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"}