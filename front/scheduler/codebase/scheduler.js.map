{"version":3,"file":"scheduler.js","sources":["../sources/defaults/locale.js","../sources/defaults/config.js","../sources/scheduler_recurring.js","../sources/defaults/templates.js","../sources/views/dayevents.js","../sources/views/datetext.js","../sources/views/weekevents.js","../sources/views/ariabutton.js","../sources/views/recurring/datecells.js","../sources/views/recurring/rectext.js","../sources/views/recurring/endrec.js","../sources/views/recurring/reclist.js","../sources/views/recurring/daily.js","../sources/views/recurring/weekly.js","../sources/views/recurring/weeklist.js","../sources/views/recurring/monthly.js","../sources/views/recurring/yearly.js","../sources/views/recurring/dialog.js","../sources/scheduler.js","../sources/defaults/xy.js"],"sourcesContent":["export const values = {\n\tweek_tab : \"Week\",\n\tday_tab : \"Day\",\n\tmonth_tab : \"Month\",\n\ticon_today : \"Today\",\n\ticon_add:\"Add\",\n\ticon_save : \"Save\",\n\ticon_done : \"Done\",\n\ticon_delete : \"Delete event\",\n\ticon_cancel : \"Cancel\",\n\ticon_edit : \"Edit\",\n\ticon_back : \"Back\",\n\ticon_close : \"Close form\",\n\ticon_yes : \"Yes\",\n\ticon_no : \"No\",\n\ticon_prev_day:\"Previous day\",\n\ticon_next_day:\"Next week\",\n\ticon_prev_week:\"Previous week\",\n\ticon_next_week:\"Next day\",\n\tconfirm_closing : \"Your changes will be lost, are your sure ?\",\n\tconfirm_deleting : \"The event will be deleted permanently, are you sure?\",\n\tlabel_event:\"Event\",\n\tlabel_start:\"Start\",\n\tlabel_end:\"End\",\n\tlabel_details:\"Notes\",\n\tlabel_from: \"from\",\n\tlabel_to: \"to\",\n\tlabel_allday: \"All day\",\n\tlabel_time: \"Time\",\n\tlabel_no_events : \"No Events\",\n\trecurring: {\n\t\tnone:\"Never\",\n\t\tdaily:\"Daily\",\n\t\tday:\"day(s)\",\n\t\tevery:\"Every\",\n\t\tweekly: \"Weekly\",\n\t\tweek:\"week(s) on\",\n\t\teach:\"Each\",\n\t\ton_day: \"on the\",\n\t\tmonthly: \"Monthly\",\n\t\tmonth: \"month(s)\",\n\t\tmonth_day:\"on what day of the month\",\n\t\tweek_day:\"on what day of the week\",\n\t\tyearly: \"Yearly\",\n\t\tyear: \"year(s) in\",\n\t\tcounters:[\"the first\",\"the second\",\"the third\", \"the fourth\", \"the fifth\"],\n\t\tnever:\"Never\",\n\t\trepeat:\"Repeat\",\n\t\tend_repeat:\"End repeat\",\n\t\tendless_repeat:\"Endless repeat\",\n\t\tend_repeat_label: \"Repeat will end by\",\n\t\tedit_message: \"Do you want to edit the whole set of repeated events?\",\n\t\tedit_series: \"Edit series\",\n\t\tedit_occurrence: \"Edit occurrence\",\n\t\tdelete_message: \"Do you want to delete the whole set of repeated events?\",\n\t\tdelete_series: \"Delete series\",\n\t\tdelete_occurrence: \"Delete occurrence\"\n\t}\n};","export const values = {\n\tinit_date : new Date(),\n\tform_date : \"%d-%m-%Y %H:%i\",\n\tform_all_day : \"%d-%m-%Y\",\n\tparse_date : \"%Y-%m-%d %H:%i\",\n\tweek_date: \"%D, %d %M\",\n\tdyn_load_date : \"%Y-%m-%d\",\n\titem_date : \"%d.%m.%Y\",\n\tall_day_date : \"%l, %d %F %Y\",\n\tday_header_date : \"%d.%m.%Y\",\n\tweek_header_date : \"%d.%m.%Y\",\n\thour_date : \"%H:%i\",\n\tscale_hour : \"%H\",\n\tcalendar_date : \"%F %Y\",\n\tcalendar_hour : \"%H:%i\",\n\tform_rules : {\n\t\tend_date:function(value,obj){\n\t\t\treturn (obj.start_date.valueOf() < value.valueOf());\n\t\t}\n\t},\n\tmulti_day: true,\n\tmulti_day_limit: 3,\n\tviews : [],\n\ttab_views : [],\n\tserver_utc: false,\n\tseparate_short_events: true,\n\trecurring: false,\n\tendless_date: new Date(9999,1,1),\n\trecurring_dialogs: false\n};\n\nexport function init(){\n\tvar config  = scheduler.config;\n\tvar labels = scheduler.locale.labels;\n\n\tif(!config.form){\n\t\tconfig.form = [\n\t\t\t{view:\"text\",\t\tlabel:labels.label_event, labelWidth: 90,\tname:\"text\"},\n\t\t\t{view:\"datetext\",\tlabel:labels.label_start, labelWidth: 90,\tid:\"start_date\",name:\"start_date\", dateFormat:config.form_date},\n\t\t\t{view:\"datetext\",\tlabel:labels.label_end, labelWidth: 90,\tid:\"end_date\",name:\"end_date\", dateFormat:config.form_date},\n\t\t\t{view:\"checkbox\",\tid:\"allDay\", name:\"allDay\", label:labels.label_allday, labelWidth: 100,  value:0},\n\t\t\t{view:\"textarea\",\tlabel:labels.label_details,\tname:\"details\", labelWidth: 90,\t\theight:150},\n\t\t\t{}\n\t\t];\n\t}\n\tif(!config.calendar_hour){\n\t\tvar hourPart = config.hour_date.match(/%[h,H,g,G]/gi);\n\t\tvar aPart = config.hour_date.match(/%[a,A]/gi);\n\t\tconfig.calendar_hour = hourPart[0]+(aPart?\" \"+aPart[0]:\"\");\n\t}\n\tif(!config.bottom_toolbar){\n\t\tconfig.bottom_toolbar = [\n\t\t\t{ view:\"button\", id:\"today\", name: \"today\", type:\"flat\", label:labels.icon_today, inputWidth:scheduler.xy.icon_today, align:\"center\", width:scheduler.xy.icon_today+6},\n\t\t\t{ view:\"segmented\", id:\"buttons\",value:(config.mode||\"week\"),align:\"center\", multiview:true, options:[\n\t\t\t\t{id:\"day\", value:labels.day_tab, width:scheduler.xy.day_tab},\n\t\t\t\t{id:\"week\", value:labels.week_tab, width:scheduler.xy.week_tab},\n\t\t\t\t{id:\"month\", value:labels.month_tab, width:scheduler.xy.month_tab}\n\t\t\t]},\n\t\t\t{ view:\"ariabutton\", label:labels.icon_add, type:\"icon\", icon:\"wxi-plus\", name:\"add\", id:\"add\", align:\"center\",width:45, batch:\"default\"},\n\t\t\t{ view:\"label\", label:\"\", width:45, batch:\"readonly\"}\n\t\t];\n\t}\n\tif(!config.day_toolbar){\n\t\tconfig.day_toolbar = [\n\t\t\t{view:\"ariabutton\", label:labels.icon_prev_day, type:\"iconprev\", id:\"prev\", align:\"left\", width: 40},\n\t\t\t{view:\"label\", id:\"date\", align:\"center\"},\n\t\t\t{view:\"ariabutton\", label:labels.icon_next_day, type:\"iconnext\", id:\"next\", align:\"right\", width: 40}\n\t\t];\n\t}\n\tif(!config.week_toolbar){\n\t\tconfig.week_toolbar = [\n\t\t\t{view:\"ariabutton\", label:labels.icon_prev_week, type:\"iconprev\", name: \"prevWeek\", id:\"prevWeek\", width: 40, align:\"left\"},\n\t\t\t{view:\"label\", id:\"weekTitle\", align:\"center\"},\n\t\t\t{view:\"ariabutton\", label:labels.icon_next_week, type:\"iconnext\", id:\"nextWeek\", align:\"right\", width: 40}\n\t\t];\n\t}\n\tif(!config.selected_toolbar){\n\t\tconfig.selected_toolbar = [\n\t\t\t{view:\"button\", width:scheduler.xy.icon_back, type:\"flat\", name:\"back\", id:\"back\", align:\"center\", label:labels.icon_back},\n\t\t\t{view:\"button\",  inputWidth:scheduler.xy.icon_edit, name:\"edit\", id:\"edit\", align:\"right\", label:labels.icon_edit}\n\t\t];\n\t}\n\tif(!config.form_toolbar){\n\t\tconfig.form_toolbar = [\n\t\t\t{view:\"button\", type:\"flat\", width:scheduler.xy.icon_cancel, name:\"cancel\", id:\"cancel\",align:\"center\", label:labels.icon_cancel},\n\t\t\t{view:\"button\", inputWidth:scheduler.xy.icon_save, name:\"save\", id:\"save\", align:\"right\", label:labels.icon_save}\n\t\t];\n\t}\n\tif(!config.date_toolbar){\n\t\tconfig.date_toolbar = [\n\t\t\t{view:\"button\", type:\"flat\", width:scheduler.xy.icon_cancel, name:\"cancel_date\", id:\"cancel_date\", align:\"center\", label:labels.icon_cancel},\n\t\t\t{view:\"label\", id:\"datetype\", align:\"center\"},\n\t\t\t{view:\"button\", width: scheduler.xy.icon_done, name:\"done\", id:\"done\", align:\"right\", label:labels.icon_done}\n\t\t];\n\t}\n}","export var code = function(){\n\n\tvar labels = scheduler.locale.labels;\n\tvar xy = scheduler.xy;\n\tvar config = scheduler.config;\n\tvar templates = scheduler.templates;\n\n\n\twebix.attachEvent(\"onAfterSchedulerInit\", function(scheduler){\n\t\tif(!config.recurring) return false;\n\n\t\twebix.delay(function(){\n\t\t\tscheduler.$$(\"editForm\").define(\"dataFeed\", function(data){\n\t\t\t\tdata = webix.copy(this.getTopParentView().getItem(data));\n\t\t\t\tdelete data.id;\n\t\t\t\tif (data.rec_type){\n\t\t\t\t\tdata.endRepeat = data.end_date;\n\t\t\t\t\tdata.end_date = new Date(data.start_date.valueOf()+data.event_length*1000);\n\t\t\t\t}\n\t\t\t\tthis.setValues(data);\n\t\t\t});\t\n\t\t\tscheduler.$$(\"editForm\").getValueBase = scheduler.$$(\"editForm\").getValues;\n\t\t\tscheduler.$$(\"editForm\").getValues = function(){\n\t\t\t\tvar data = this.getValueBase();\n\t\t\t\tif (data.rec_type){\n\t\t\t\t\tdata.event_length = Math.round((data.end_date - data.start_date) / 1000);\n\t\t\t\t\tdata.end_date = data.endRepeat||data.end_date;\n\t\t\t\t}\n\t\t\t\treturn data;\n\t\t\t};\n\t\t});\n\n\t\tscheduler.getEventsBase = scheduler.getEvents;\n\t\tscheduler.getEvents = function(from,to){\n\t\t\tto = to||webix.Date.add(from, 1, \"month\",true);\n\n\t\t\tvar evs = this.getEventsBase(from, to);\n\t\t\tvar out = [];\n\t\t\tfor (var i = 0; i < evs.length; i++){\n\t\t\t\tif (evs[i].rec_type)\n\t\t\t\t\tthis.repeat_date(evs[i], out, from, to);\n\t\t\t\telse\n\t\t\t\t\tout.push(evs[i]);\n\t\t\t}\n\n\t\t\tout.sort(function(a,b){\n\t\t\t\ta = a.start_date;\n\t\t\t\tb = b.start_date;\n\t\t\t\treturn a>b?1:(a<b?-1:0);\n\t\t\t});\n\t\t\treturn out;\n\t\t};\n\t\tscheduler._saveEventBase = scheduler._saveEvent;\n\t\tscheduler._saveEvent = function(){\n\t\t\tif(!this.config.editEvent && this.$$(\"editForm\").validate()){\n\t\t\t\tvar data = this.$$(\"editForm\").getValues();\n\t\t\t\tif(data.event_pid){\n\t\t\t\t\tdata.id = webix.uid();\n\t\t\t\t\tif(data.details&&this._trim(data.text)===\"\"&&this._trim(data.details)!==\"\")\n\t\t\t\t\t\tdata.text = data.details;\n\n\t\t\t\t\tdata.event_length = data.start_date.valueOf()/1000;\n\t\t\t\t\tthis._add_rec_marker(data,data.start_date.valueOf());\n\t\t\t\t\tthis.add(data);\n\t\t\t\t\tthis.setCursor(data.id);\n\t\t\t\t\tthis.setDate();\n\t\t\t\t\tthis.$$(\"views\").back();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._saveEventBase.call(this);\n\t\t};\n\n\t\tscheduler._editEventBase = scheduler._editEvent;\n\t\tscheduler._editEvent = function(){\n\t\t\tvar item = this.getItem(this.getCursor());\n\t\t\tif((item.rec_type || item.event_pid) && config.recurring_dialogs){\n\t\t\t\twebix.rec_dialog({\n\t\t\t\t\theight:xy.confirm_height,\n\t\t\t\t\twidth:xy.confirm_width,\n\t\t\t\t\tmessage: labels.recurring.edit_message,\n\t\t\t\t\tcallback: function(result) {\n\t\t\t\t\t\tif (result == 1){\n\t\t\t\t\t\t\tif(item.event_pid)\n\t\t\t\t\t\t\t\tscheduler.setCursor(item.event_pid);\n\t\t\t\t\t\t\tscheduler._editEventBase.call(scheduler);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (result == 2)\n\t\t\t\t\t\t\tscheduler._applyRecExeption(\"edit\");\n\t\t\t\t\t},\n\t\t\t\t\tlabelSeries:labels.recurring.edit_series,\n\t\t\t\t\tlabelEvent:labels.recurring.edit_occurrence,\n\t\t\t\t\tlabelCancel:labels.icon_cancel\n\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t\tscheduler._editEventBase.call(this);\n\t\t};\n\t\tscheduler._deleteEventBase = scheduler._deleteEvent;\n\t\tscheduler._deleteEvent = function(){\n\t\t\tvar item = this.getItem(this.getCursor());\n\t\t\tif((item.rec_type || item.event_pid) && config.recurring_dialogs){\n\t\t\t\twebix.rec_dialog({\n\t\t\t\t\theight:xy.confirm_height,\n\t\t\t\t\twidth:xy.confirm_width,\n\n\t\t\t\t\tmessage: labels.recurring.delete_message,\n\t\t\t\t\tcallback: function(result) {\n\t\t\t\t\t\tif (result == 1){\n\t\t\t\t\t\t\tscheduler.remove(scheduler.getCursor());\n\t\t\t\t\t\t\tscheduler.setDate();\n\t\t\t\t\t\t\tscheduler.$$(\"views\").back(1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (result == 2)\n\t\t\t\t\t\t\tscheduler._applyRecExeption(\"remove\");\n\t\t\t\t\t},\n\t\t\t\t\tlabelSeries:labels.recurring.delete_series,\n\t\t\t\t\tlabelEvent:labels.recurring.delete_occurrence,\n\t\t\t\t\tlabelCancel:labels.icon_cancel\n\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t\tscheduler._deleteEventBase.call(this);\n\t\t};\n\n\n\t\tscheduler._applyRecExeption = function(mode){\n\t\t\tvar data, id;\n\t\t\tif( mode == \"edit\" ){\n\t\t\t\tdata = webix.copy(this.getItem(this.getCursor()));\n\n\t\t\t\tif(data.rec_type){\n\t\t\t\t\tthis.define(\"editEvent\",false);\n\n\t\t\t\t\tif(this.$$(\"rec_type\") && !this.$$(\"rec_type\").config.hidden)\n\t\t\t\t\t\tthis._recTypeState = \"hide\";\n\n\t\t\t\t\tthis.$$(\"form\").show();\n\n\t\t\t\t\tthis.$$(\"editForm\").clear();\n\n\t\t\t\t\tdata.event_pid = data.id;\n\t\t\t\t\tid = this._last_selected;\n\n\t\t\t\t\tif (!id && !id[1])\n\t\t\t\t\t\treturn scheduler._editEventBase.call(this);\n\n\t\t\t\t\tdata.start_date = new Date(id[1]*1000);\n\t\t\t\t\tdata.end_date = new Date(id[1]*1000+data.event_length*1000);\n\n\t\t\t\t\tdelete data.id;\n\n\t\t\t\t\tdata.rec_type = data.rec_pattern = \"\";\n\n\t\t\t\t\tdata.end_date = new Date(data.start_date.valueOf()+data.event_length*1000);\n\t\t\t\t\tthis.$$(\"editForm\").setValues(data);\n\t\t\t\t\tthis._setDefaultDates();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tscheduler._editEventBase.call(this);\n\t\t\t}\n\t\t\telse if( mode == \"remove\" ){\n\t\t\t\tdata = webix.copy(this.getItem(this.getCursor()));\n\t\t\t\tdata.event_pid = data.id;\n\t\t\t\tid = this._last_selected;\n\n\t\t\t\tif (!id || !id[1])\n\t\t\t\t\treturn ;\n\n\t\t\t\tdata.start_date = new Date(id[1]*1000);\n\t\t\t\tdata.end_date = new Date(id[1]*1000+data.event_length*1000);\n\n\t\t\t\tdata.id = webix.uid();\n\t\t\t\tdata.rec_type = data.rec_pattern=  \"none\";\n\n\t\t\t\tdata.end_date = new Date(data.start_date.valueOf()+data.event_length*1000);\n\t\t\t\tdata.event_length = data.start_date.valueOf()/1000;\n\n\t\t\t\tthis._add_rec_marker(data,data.start_date.valueOf());\n\t\t\t\tthis.add(data);\n\t\t\t\t//this.setCursor(data.id);\n\t\t\t\tthis.setDate();\n\t\t\t\tthis.$$(\"views\").back();\n\t\t\t}\n\t\t};\n\n\n\t\tscheduler._rec_markers = {};\n\t\tscheduler._rec_markers_pull = {};\n\t\tscheduler._add_rec_marker = function(ev,time){\n\t\t\tev._pid_time = time;\n\t\t\tthis._rec_markers[ev.id] = ev;\n\t\t\tif (!this._rec_markers_pull[ev.event_pid]) this._rec_markers_pull[ev.event_pid] = {};\n\t\t\tthis._rec_markers_pull[ev.event_pid][time]=ev;\n\t\t};\n\t\tscheduler._get_rec_marker = function(time, id){\n\t\t\tvar ch = this._rec_markers_pull[id];\n\t\t\tif (ch) return ch[time];\n\t\t\treturn null;\t \n\t\t};\n\t\tscheduler._get_rec_markers = function(id){\n\t\t\treturn (this._rec_markers_pull[id]||[]);\t\n\t\t};\n\n\t\tscheduler.data.scheme({\n\t\t\t$init:function(data){\n\t\t\t\tif(typeof data.start_date == \"string\")\n\t\t\t\t\tdata.start_date\t= webix.i18n.fullDateFormatDate(data.start_date);\n\t\t\t\tif(typeof data.end_date == \"string\")\n\t\t\t\t\tdata.end_date \t= webix.i18n.fullDateFormatDate(data.end_date);\n\n\t\t\t\tif (data.event_pid)\n\t\t\t\t\tscheduler._add_rec_marker(data, data.event_length*1000);\n\t\t\t},\n\t\t\t$serialize:function(data){\n\t\t\t\tvar obj = {};\n\t\t\t\tobj.start_date = webix.i18n.fullDateFormatStr(webix.Date.copy(data.start_date));\n\t\t\t\tobj.end_date = webix.i18n.fullDateFormatStr(webix.Date.copy(data.end_date));\n\t\t\t\twebix.extend(obj,data);\n\t\t\t\treturn obj;\n\t\t\t}\n\t\t});\n\t\t\n\n\t\tscheduler.transponse_size={\n\t\t\tday:1, week:7, month:1, year:12 \n\t\t};\n\t\tscheduler.day_week=function(sd,day,week){\n\t\t\tsd.setDate(1);\n\t\t\tweek = (week-1)*7;\n\t\t\tvar cday = sd.getDay();\n\t\t\tvar nday=(day==7?0:(day*1))+week-cday+1;\n\t\t\tsd.setDate(nday<=week?(nday+7):nday);\n\t\t};\n\t\tscheduler.transpose_day_week=function(sd,list,cor,size,cor2){\n\t\t\tvar cday = (sd.getDay()||(webix.Date.startOnMonday?7:0))-cor;\n\t\t\tfor (var i=0; i < list.length; i++) {\n\t\t\t\tif (list[i]>cday)\n\t\t\t\t\treturn sd.setDate(sd.getDate()+list[i]*1-cday-(size?cor:cor2));\n\t\t\t}\n\t\t\tscheduler.transpose_day_week(sd,list,cor+size,null,cor);\n\t\t};\t\n\t\tscheduler.transpose_type = function(type){\n\t\t\tvar f = \"transpose_\"+type;\n\t\t\tif (!webix.Date[f]) {\n\t\t\t\tvar str = type.split(\"_\");\n\t\t\t\tvar day = 60*60*24*1000;\n\t\t\t\tvar step = scheduler.transponse_size[str[0]]*str[1];\n\t\t\t\t\n\t\t\t\tif (str[0]==\"day\" || str[0]==\"week\"){\n\t\t\t\t\tvar days = null;\n\t\t\t\t\tif (str[4]){\n\t\t\t\t\t\tdays=str[4].split(\",\");\n\t\t\t\t\t\tif (webix.Date.startOnMonday){\n\t\t\t\t\t\t\tfor (var i=0; i < days.length; i++)\n\t\t\t\t\t\t\t\tdays[i]=(days[i]*1)||7;\n\t\t\t\t\t\t\tdays.sort();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\twebix.Date[f] = function(nd,td){\n\t\t\t\t\t\tvar delta = Math.floor((td.valueOf()-nd.valueOf())/(day*step));\n\t\t\t\t\t\tif (delta>0)\n\t\t\t\t\t\t\tnd.setDate(nd.getDate()+delta*step);\n\t\t\t\t\t\tif (days)\n\t\t\t\t\t\t\tscheduler.transpose_day_week(nd,days,1,step);\n\t\t\t\t\t};\n\t\t\t\t\twebix.Date.add[type] = function(nd,inc){\n\t\t\t\t\t\tif (days){\n\t\t\t\t\t\t\tfor (var count=0; count < inc; count++)\n\t\t\t\t\t\t\t\tscheduler.transpose_day_week(nd,days,0,step);\t\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tnd.setDate(nd.getDate()+inc*step);\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn nd;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse if (str[0]==\"month\" || str[0]==\"year\"){\n\t\t\t\t\twebix.Date[f] = function(nd,td){\n\t\t\t\t\t\tvar delta = Math.ceil(((td.getFullYear()*12+td.getMonth()*1)-(nd.getFullYear()*12+nd.getMonth()*1))/(step));\n\t\t\t\t\t\tif (delta>=0)\n\t\t\t\t\t\t\tnd.setMonth(nd.getMonth()+delta*step);\n\t\t\t\t\t\tif (str[3])\n\t\t\t\t\t\t\tscheduler.day_week(nd,str[2],str[3]);\n\t\t\t\t\t};\n\t\t\t\t\twebix.Date.add[type] = function(nd,inc){\n\t\t\t\t\t\tnd.setMonth(nd.getMonth()+inc*step);\n\t\t\t\t\t\tif (str[3])\n\t\t\t\t\t\t\tscheduler.day_week(nd,str[2],str[3]);\n\t\t\t\t\t\treturn nd;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tscheduler.data.attachEvent(\"onStoreUpdated\", function(id, data, mode){\n\t\t\tif (mode == \"delete\" || mode == \"update\" || (mode == \"insert\" && !data.rec_type && data.event_pid)){\n\t\t\t\tthis.blockEvent();\n\t\t\t\tvar sub = scheduler._get_rec_markers(id);\n\t\t\t\tscheduler._rec_markers_pull[id] = null;\n\t\t\t\tfor (var i in sub) {\n\t\t\t\t\tif(sub.hasOwnProperty(i)){\n\t\t\t\t\t\tid = sub[i].id;\n\t\t\t\t\t\tif(this.getItem(id))\n\t\t\t\t\t\t\tthis.remove(id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.unblockEvent();\n\t\t\t}\n\n\t\t});\n\t\tscheduler.repeat_date=function(ev,stack,from,to){\n\t\t\tif (ev.rec_type == \"none\")\n\t\t\t\treturn;\n\n\t\t\tvar td = new Date(ev.start_date.valueOf());\n\t\t\tev.rec_pattern = ev.rec_type.split(\"#\")[0];\n\t\t\t\n\t\t\tscheduler.transpose_type(ev.rec_pattern);\n\t\t\twebix.Date[\"transpose_\"+ev.rec_pattern](td, from);\n\t\t\t\n\t\t\twhile (td<ev.start_date || (td.valueOf()+ev.event_length*1000)<=from.valueOf())\n\t\t\t\ttd = webix.Date.add(td,1,ev.rec_pattern,true);\n\t\t\twhile (td < to && td < ev.end_date){\n\t\t\t\tvar ch = this._get_rec_marker(td.valueOf(),ev.id);\n\t\t\t\tif (!ch){\n\t\t\t\t\tvar ted = new Date(td.valueOf()+ev.event_length*1000);\n\t\t\t\t\tvar copy=webix.copy(ev);\n\t\t\t\t\t//copy._timed = ev._timed;\n\t\t\t\t\tcopy.text = ev.text;\n\t\t\t\t\tcopy.start_date = td;\n\t\t\t\t\tcopy.event_pid = ev.id;\n\t\t\t\t\tcopy.id = ev.id+\"#\"+Math.ceil(td.valueOf()/1000);\n\t\t\t\t\tcopy.end_date = ted;\n\t\t\t\n\t\t\t\t\tvar shift = copy.start_date.getTimezoneOffset() - copy.end_date.getTimezoneOffset();\n\t\t\t\t\tif (shift){\n\t\t\t\t\t\tif (shift>0) \n\t\t\t\t\t\t\tcopy.end_date = new Date(td.valueOf()+ev.event_length*1000-shift*60*1000);\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tcopy.end_date = new Date(copy.end_date.valueOf() + shift*60*1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tstack.push(copy);\n\t\t\t\t}\n\t\t\t\ttd = webix.Date.add(td,1,ev.rec_pattern,true);\n\t\t\t}\t\t\n\t\t};\n\n\t});\n\n\n\twebix.attachEvent(\"onBeforeSchedulerInit\",function(){\n\t\tif(!config.recurring) return true;\n\n\t\tif(!config.form){\n\t\t\tconfig.form = [\n\t\t\t\t{view:\"text\",\t\tlabel:labels.label_event,\tname:\"text\", labelWidth: 90},\n\t\t\t\t{view:\"datetext\",\tlabel:labels.label_start,\tid:\"start_date\",\tname:\"start_date\", dateFormat:config.form_date, labelWidth: 90},\n\t\t\t\t{view:\"datetext\",\tlabel:labels.label_end,\t\tid:\"end_date\",\t\tname:\"end_date\", \t  dateFormat:config.form_date, labelWidth: 90},\n\t\t\t\t{view:\"checkbox\",\tid:\"allDay\",\tname:\"allDay\", label:labels.label_allday,  value:0, labelWidth: 100},\n\t\t\t\t{view:\"rectext\",\tlabel:labels.recurring.repeat,\tid:\"rec_type\",\tname:\"rec_type\", readonly:true, labelWidth: 90},\n\t\t\t\t{view:\"textarea\",\tlabel:labels.label_details,\tid:\"details\",\tname:\"details\",\t\theight:110, labelWidth: 90},\n\t\t\t\t{view:\"text\",\thidden: true, id:\"event_length\", name:\"event_length\"}\n\t\t\t];\n\t\t}\n\t\t\t\n\t\tif(!config.recurring_bar){\n\t\t\tconfig.recurring_bar = [\n\t\t\t\t{view:\"label\", width:xy.icon_cancel, id:\"recCancel\", name:\"recCancel\",css:\"cancel\",align:\"center\",label:labels.icon_cancel,batch:\"default\"},\n\t\t\t\t{view:\"label\", width:xy.icon_cancel, id:\"recEndCancel\", name:\"recEndCancel\", css:\"cancel\",align:\"center\",label:labels.icon_cancel,batch:\"endRepeat\"},\n\t\t\t\t{},\n\t\t\t\t{view:\"button\", width:xy.icon_done, id:\"recDone\", name:\"recDone\",align:\"right\",label:labels.icon_done,batch:\"default\"},\n\t\t\t\t{view:\"button\", width:xy.icon_done, id:\"recDone2\", name:\"recDone2\", align:\"right\",label:labels.icon_done,batch:\"other\"},\n\n\t\t\t\t{view:\"button\", width:xy.icon_done, id:\"recEndDone\", name:\"recEndDone\", align:\"right\",label:labels.icon_done,batch:\"endRepeat\"}\n\t\t\t];\n\t\t}\n\t\t/*list of recurring types in the first view*/\n\t\tif(!config.recurring_views_list)\n\t\t\tconfig.recurring_views_list = [\n\t\t\t\t{id:\"none\",value:labels.recurring.none, readonly:true},\n\t\t\t\t{id:\"daily\",value:labels.recurring.daily},\n\t\t\t\t{id:\"weekly\",value:labels.recurring.weekly},\n\t\t\t\t{id:\"monthly\",value:labels.recurring.monthly},\n\t\t\t\t{id:\"yearly\",value:labels.recurring.yearly}\n\t\t\t];\n\t\tif(!scheduler.templates.rec_list_item){\n\t\t\tscheduler.templates.rec_list_item = function(obj){\n\t\t\t\treturn obj.value +(!obj.readonly?\"<div class='webix_arrow_icon'></div>\":\"\");\n\t\t\t};\n\t\t}\n\t\t/* the initial view, the with \"repeat\" options*/\n\t\tif(!config.rec_init_form)\n\t\t\tconfig.rec_init_form = [\n\t\t\t\t{height:10},\n\t\t\t\t{view:\"reclist\",id:\"recList\", type:{height:42}, autoheight: true, scroll: false, select:true,css:\"rec_list\",value:\"none\",template:scheduler.templates.rec_list_item, datatype:\"json\",data:config.recurring_views_list, labelWidth:100},\n\t\t\t\t{ maxHeight: 42},\n\n\t\t\t\t{view:\"endrec\", id:\"endRepeat\", name:\"endRepeat\", labelWidth:xy.recurring.label_end_repeat,  label:labels.recurring.end_repeat},\n\n\t\t\t\t{}\n\t\t\t];\n\t\tif(!config.end_repeat_form)\n\t\t\tconfig.end_repeat_form = [\n\t\t\t\t{\n\t\t\t\t\ttype:\"clean\",\n\t\t\t\t\tpaddingX: 10,\n\t\t\t\t\tpaddingY: 5,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{view:\"radio\", css:\"webix_endby_radio\",vertical:true, id:\"endBy\",width:290, labelWidth:xy.recurring.label_end_by, height:80, options:[\n\t\t\t\t\t\t\t{ value:labels.recurring.endless_repeat, id: \"0\" },\n\t\t\t\t\t\t\t{ value:labels.recurring.end_repeat_label, id: \"1\" }\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{view:\"calendar\", id:\"endByDate\", width:0, css:\"end_rep_calendar\",icons: false},{}\n\t\t\t];\n\t\t/*Daily view*/\n\t\tif(!config.daily_form)\n\t\t\tconfig.daily_form = [\n\n\t\t\t\t{\n\t\t\t\t\ttype:\"clean\",\n\t\t\t\t\tcss: \"webix_rec_counter\",\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{view:\"label\", label:labels.recurring.every,width:xy.recurring.label_every},\n\t\t\t\t\t\t{view:\"counter\", id:\"dayCount\", name:\"dayCount\", value:1,width:125},\n\t\t\t\t\t\t{view:\"label\", label:labels.recurring.day}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{}\n\t\t\t];\n\n\t\ttemplates.selected_event_base = templates.selected_event;\n\t\ttemplates.selected_event = function(ev,common){\n\t\t\tif (!ev.rec_type)\n\t\t\t\treturn templates.selected_event_base(ev);\n\t\t\telse{\n\t\t\t\tvar id = common.getTopParentView()._last_selected;\n\n\t\t\t\tif (!id || !id[1])\n\t\t\t\t\treturn templates.selected_event_base(ev);\n\n\t\t\t\tvar sd = ev.start_date;\n\t\t\t\tvar ed = ev.end_date;\n\t\t\t\tev.start_date = new Date(id[1]*1000);\n\t\t\t\tev.end_date = new Date(id[1]*1000+ev.event_length*1000);\n\n\t\t\t\tvar html = templates.selected_event_base(ev);\n\n\t\t\t\tev.start_date = sd;\n\t\t\t\tev.end_date = ed;\n\t\t\t\treturn html;\n\t\t\t}\n\t\t};\n\n\t\t/*Weekly view*/\n\n\t\tif(!config.weekly_form)\n\t\t\tconfig.weekly_form = [\n\t\t\t\t{\n\t\t\t\t\theight:10\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype:\"clean\",\n\t\t\t\t\tcss: \"webix_rec_counter\",\n\t\t\t\t\tpaddingX: 8,\n\t\t\t\t\theight:42,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{view:\"label\", borderless: true, label:labels.recurring.every,width:xy.recurring.label_every},\n\t\t\t\t\t\t{view:\"counter\", id:\"weekCount\", name:\"weekCount\", value:1,width:125},\n\t\t\t\t\t\t{view:\"label\", label:labels.recurring.week}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{view:\"weeklist\",id:\"weekDays\", name:\"weekDays\"},\n\t\t\t\t{}\n\t\t\t];\n\t\t\n\t\t\n\t\t/*Monthly view*/\n\t\tvar monthDays = {};\n\t\tfor(var i=1;i<32;i++)\n\t\t\tmonthDays[i]=i;\n\t\t\t\n\t\tif(!scheduler.templates.rec_month_d)\n\t\t\tscheduler.templates.rec_month_d = function(){\n\t\t\t\treturn \"<div class='radio'><div class='on'></div></div><div class='text'>\"+labels.recurring.month_day+\"</div>\";\n\t\t\t};\n\t\tif(!scheduler.templates.rec_month_w)\n\t\t\tscheduler.templates.rec_month_w = function(){\n\t\t\t\treturn \"<div class='radio'><div class='on'></div></div><div class='text'>\"+labels.recurring.week_day+\"</div>\";\n\t\t\t};\n\t\t\n\t\tif(!scheduler.templates.rec_month_d_blured)\n\t\t\tscheduler.templates.rec_month_d_blured = function(){\n\t\t\t\treturn \"<div class='radio blured'></div><div class='text'>\"+labels.recurring.month_day+\"</div>\";\n\t\t\t};\n\t\tif(!scheduler.templates.rec_month_w_blured)\n\t\t\tscheduler.templates.rec_month_w_blured = function(){\n\t\t\t\treturn \"<div class='radio blured'></div><div class='text'>\"+labels.recurring.week_day+\"</div>\";\n\t\t\t};\n\t\t\t\n\t\tif(!config.week_day_counters)\n\t\t\tconfig.week_day_counters = [\n\t\t\t\t{id:1,value:labels.recurring.counters[0]},\n\t\t\t\t{id:2,value:labels.recurring.counters[1]},\n\t\t\t\t{id:3,value:labels.recurring.counters[2]},\n\t\t\t\t{id:4,value:labels.recurring.counters[3]},\n\t\t\t\t{id:5,value:labels.recurring.counters[4]}\n\t\t\t];\n\t\tif(!config.week_day_labels)\n\t\t\tconfig.week_day_labels = [\n\t\t\t\t{id:1,value:webix.i18n.calendar.dayFull[1]},\n\t\t\t\t{id:2,value:webix.i18n.calendar.dayFull[2]},\n\t\t\t\t{id:3,value:webix.i18n.calendar.dayFull[3]},\n\t\t\t\t{id:4,value:webix.i18n.calendar.dayFull[4]},\n\t\t\t\t{id:5,value:webix.i18n.calendar.dayFull[5]},\n\t\t\t\t{id:6,value:webix.i18n.calendar.dayFull[6]},\n\t\t\t\t{id:7,value:webix.i18n.calendar.dayFull[0]}\n\t\t\t];\n\t\tif(!config.monthly_form)\n\t\t\tconfig.monthly_form = [\n\n\t\t\t\t{\n\t\t\t\t\ttype:\"clean\",\n\t\t\t\t\tpaddingX: 10,\n\t\t\t\t\theight:42,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{view:\"label\", label:labels.recurring.every,width:xy.recurring.label_every},\n\t\t\t\t\t\t{view:\"counter\", id:\"monthCount\", name:\"monthCount\", value:1,width:125},\n\t\t\t\t\t\t{view:\"label\", label:labels.recurring.month},\n\t\t\t\t\t\t{view:\"text\", hidden: true, name:\"monthType\",value:\"Day\",width:1}\n\t\t\t\t\t]\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\tview:\"accordion\",\n\t\t\t\t\tid:\"monthTypeSelect\",\n\t\t\t\t\t//borderless: true,\n\t\t\t\t\trows:[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theaderAltHeight:50,\n\t\t\t\t\t\t\theaderHeight:50,\n\t\t\t\t\t\t\tid:\"typeDayM\",\n\t\t\t\t\t\t\theader:scheduler.templates.rec_month_d,\n\t\t\t\t\t\t\theaderAlt:scheduler.templates.rec_month_d_blured,\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tview:\"datecells\",\n\t\t\t\t\t\t\t\tid:\"monthDayM\",\n\t\t\t\t\t\t\t\tname:\"monthDayM\",\n\t\t\t\t\t\t\t\tdata:monthDays\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theaderAltHeight:50,\n\t\t\t\t\t\t\theaderHeight:50,\n\t\t\t\t\t\t\tid:\"typeWeekM\",\n\t\t\t\t\t\t\theader:scheduler.templates.rec_month_w,\n\t\t\t\t\t\t\theaderAlt:scheduler.templates.rec_month_w_blured,\n\t\t\t\t\t\t\tcollapsed: true,\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\ttype:\"clean\",\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t{height: 10},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttype:\"clean\",\n\t\t\t\t\t\t\t\t\t\tpaddingX:10,\n\t\t\t\t\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t\t\t\t\t{view:\"select\",value:1,id:\"weekCountM\",name:\"weekCountM\", css:\"\", options:config.week_day_counters},\n\t\t\t\t\t\t\t\t\t\t\t{view:\"select\",value:1,id:\"weekDayM\",name:\"weekDayM\", css:\"\", options:config.week_day_labels}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t];\n\t\tif(!config.year_months){\n\t\t\tconfig.year_months = (scheduler.locale.date?scheduler.locale.date.month_short:webix.i18n.calendar.monthShort);\n\t\t}\n\t\t/*Yearly view*/\n\t\tif(!config.yearly_form)\n\t\t\tconfig.yearly_form = [\n\n\t\t\t\t{\n\t\t\t\t\ttype:\"clean\",\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{view:\"label\", label:labels.recurring.every,width:xy.recurring.label_every},\n\t\t\t\t\t\t{view:\"counter\", id:\"yearCount\", name:\"yearCount\", value:1,width:125},\n\t\t\t\t\t\t{view:\"label\", label:labels.recurring.year}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview:\"datecells\",\n\t\t\t\t\tid:\"monthDayY\",\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tdata:config.year_months,\n\t\t\t\t\tx_count:4,\n\t\t\t\t\theight:130\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview:\"checkbox\",label:labels.recurring.week_day, id:\"typeWeekY\", name:\"typeWeekY\", labelWidth:250, value:1\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\tid:\"yearWeekRow\",\n\t\t\t\t\ttype:\"clean\",\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{view:\"select\",value:1,id:\"weekCountY\",name:\"weekCountY\",options:config.week_day_counters},\n\t\t\t\t\t\t{view:\"select\",value:1,id:\"weekDayY\",name:\"weekDayY\",options:config.week_day_labels}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{}\n\t\t\t\t\n\t\t\t];\n\t\t\n\t\t/*recurring subviews*/\n\t\tif(!config.recurring_views)\n\t\t\tconfig.recurring_views = [\n\t\t\t\t{id:\"recForm\", view:\"form\", css: \"webix_rec_form\", padding:0, scroll: false, elements: config.rec_init_form},\n\t\t\t\t{id:\"endRepeatForm\", view:\"form\",type: \"clean\", elements: config.end_repeat_form},\n\t\t\t\t{id:\"daily\",view:\"daily\",elements: config.daily_form, elementsConfig:{height:42}},\n\t\t\t\t{id:\"weekly\", view:\"weekly\", type: \"clean\", elements: config.weekly_form},\n\t\t\t\t{id:\"monthly\", view:\"monthly\", elements: config.monthly_form, margin:10},\n\t\t\t\t{id:\"yearly\", view:\"yearly\", padding: 10, margin:10, type: \"clean\", elements: config.yearly_form, elementsConfig:{height:42}}\n\t\t\t];\n\t\t\n\t\t/*adds recurring view into cells collection of scheduler's multiview*/\n\t\tconfig.views.push({\n\t\t\tview:\"recurring\",\n\t\t\tid:\"recurring\"\n\t\t});\n\t\t\n\t\t/*recurring view definition*/\n\t\twebix.protoUI({\n\t\t\tname:\"recurring\",\n\t\t\tdefaults:{\n\t\t\t\tpadding:0,\n\t\t\t\trows:[\n\t\t\t\t\t{view:\"toolbar\",id:\"reccuringBar\", height:50, css:\"webix_subbar\", elements:config.recurring_bar, visibleBatch:\"default\"},\n\t\t\t\t\t{id:\"recViews\", animate: false, cells:config.recurring_views}\n\t\t\t\t],\n\t\t\t\ttypeToId:{\"day\":\"daily\",\"week\":\"weekly\",\"month\":\"monthly\",\"year\":\"yearly\"},\n\t\t\t\tendlessDate: config.endless_date\n\t\t\t},\n\t\t\t$init: function() {\n\t\t\t\tthis.name = \"Recurring\";\n\t\t\t\tthis.$view.className += \" webix_recurring\";\n\t\t\t\tthis.$ready.push(this._setEvents);\n\t\t\t},\n\t\t\t_setEvents:function(){\n\t\t\t\tvar idToType = {};\n\t\t\t\tfor(var type in this.config.typeToId)\n\t\t\t\t\tidToType[this.config.typeToId[type]] = type;\n\t\t\t\tthis.define(\"idToType\",idToType);\n\t\t\t\twebix.delay(function(){\n\t\t\t\t\tvar topParent = this.getTopParentView();\n\t\t\t\t\ttopParent.$$(\"rec_type\").attachEvent(\"onItemClick\",this._showRecViewsList);\n\t\t\t\t\ttopParent.$$(\"reccuringBar\").attachEvent(\"onItemClick\",webix.bind(function(id){\n\t\t\t\t\t\tid = this.innerId(id);\n\t\t\t\t\t\tswitch(id){\n\t\t\t\t\t\t\tcase \"recDone2\":\n\t\t\t\t\t\t\tcase \"recEndCancel\":\n\t\t\t\t\t\t\t\tthis.$$(\"recViews\").back();\n\t\t\t\t\t\t\t\tthis.$$(\"reccuringBar\").showBatch(\"default\");\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"recCancel\":\n\t\t\t\t\t\t\t\tthis.$$(\"views\").back();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"recDone\":\n\t\t\t\t\t\t\t\tthis.$$(\"recurring\")._applyRecurrence();\n\t\t\t\t\t\t\t\tthis.$$(\"views\").back();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase \"recEndDone\":\n\t\t\t\t\t\t\t\tvar endDate;\n\t\t\t\t\t\t\t\tif(this.$$(\"endBy\").getValue()==\"1\")\n\t\t\t\t\t\t\t\t\tendDate = this.$$(\"endByDate\").getValue();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tendDate = this.$$(\"recurring\").config.endlessDate;\n\t\t\t\t\t\t\t\tthis.$$(\"endRepeat\").setValue(endDate);\n\t\t\t\t\t\t\t\tthis.$$(\"recViews\").back();\n\t\t\t\t\t\t\t\tthis.$$(\"reccuringBar\").showBatch(\"default\");\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t},topParent));\n\t\t\t\t\ttopParent.$$(\"recList\").attachEvent(\"onItemClick\",webix.bind(this._showRecView,topParent));\n\t\t\t\t\ttopParent.$$(\"endRepeat\").attachEvent(\"onItemClick\",webix.bind(function(){\n\t\t\t\t\t\tthis._showRecView.call(topParent,\"endRepeatForm\");\n\t\t\t\t\t\ttopParent.$$(\"reccuringBar\").showBatch(\"endRepeat\");\n\t\t\t\t\t\tthis._setEndDate();\n\t\t\t\t\t},this));\n\t\t\t\t\t\n\t\t\t\t\tif(topParent.$$(\"typeWeekY\"))\n\t\t\t\t\t\ttopParent.$$(\"typeWeekY\").attachEvent(\"onItemClick\",function(){\n\t\t\t\t\t\t\tif(this.getValue())\n\t\t\t\t\t\t\t\ttopParent.$$(\"yearWeekRow\").show();\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\ttopParent.$$(\"yearWeekRow\").hide();\n\t\t\t\t\t\t});\n\t\t\t\t\tif(topParent.$$(\"endBy\"))\n\t\t\t\t\t\ttopParent.$$(\"endBy\").attachEvent(\"onItemClick\",function(){\n\t\t\t\t\t\t\tif(this.getValue() == \"1\")\n\t\t\t\t\t\t\t\ttopParent.$$(\"endByDate\").show();\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\ttopParent.$$(\"endByDate\").hide();\n\t\t\t\t\t\t});\n\t\t\t\t\ttopParent.$$(\"editForm\").attachEvent(\"onItemClick\", webix.bind(function(id){\n\t\t\t\t\t\tid = this.innerId(id);\n\t\t\t\t\t\tif(id==\"end_date\"){\n\t\t\t\t\t\t\tthis._showDateForm(id);\n\t\t\t\t\t\t}\n\t\t\t\t\t},topParent));\t\t\t\n\t\t\t\t\ttopParent.$$(\"weekly\").elements.weekDays = topParent.$$(\"weekDays\");\n\t\t\t\t\ttopParent.$$(\"monthly\").elements.monthDayM = topParent.$$(\"monthDayM\");\n\t\t\t\t\ttopParent.$$(\"yearly\").elements.monthDayY = topParent.$$(\"monthDayY\");\n\t\t\t\t\ttopParent.$$(\"editForm\").elements.endRepeat = topParent.$$(\"endRepeat\");\n\n\t\t\t\t\t// hide rec_type field in case of editing series occurrence\n\t\t\t\t\ttopParent.$$(\"views\").attachEvent(\"onViewChange\",function(v1,v2){\n\t\t\t\t\t\tif(topParent._recTypeState && topParent.$$(\"form\").config.id == v2){\n\t\t\t\t\t\t\tif(topParent._recTypeState == \"hide\"){\n\t\t\t\t\t\t\t\ttopParent.$$(\"rec_type\").hide();\n\t\t\t\t\t\t\t\ttopParent._recTypeState = \"show\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(topParent._recTypeState == \"show\")\n\t\t\t\t\t\t\t\ttopParent.$$(\"rec_type\").show();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t},this);\n\t\t\t},\n\t\t\t_showRecViewsList:function(){\n\t\t\t\tvar topParent = this.getTopParentView(); \n\t\t\t\ttopParent.$$(\"recurring\").show();\n\t\t\t\tif(topParent.$$(\"recForm\")){\n\t\t\t\t\ttopParent.$$(\"recForm\").show();\n\t\t\t\t\ttopParent.$$(\"recurring\").setValue();\n\t\t\t\t\ttopParent.$$(\"endRepeat\").setValue(topParent.$$(\"endRepeat\").config.value);\n\t\t\t\t}\n\t\t\t},\n\t\t\t_showRecView:function(id){\n\n\t\t\t\tif(this.$$(id)){\n\t\t\t\t\tthis.$$(id).show();\n\t\t\t\t\tthis.$$(\"reccuringBar\").showBatch(\"other\");\n\t\t\t\t}\n\n\t\t\t\tif(!this.$$(\"endRepeat\").getValue())\n\t\t\t\t\tthis.$$(\"endRepeat\").setValue(this.$$(\"recurring\").config.endlessDate);\n\t\t\t},\n\t\t\tsetValue:function(){\n\t\t\t\tvar topParent = this.getTopParentView();\n\t\t\t\tvar recType = (topParent.$$(\"rec_type\").getValue()||\"_____\").split(\"_\");\n\t\t\t\tvar config = topParent.$$(\"recurring\").config;\n\t\t\t\ttopParent.$$(\"recList\").setValue(recType[0]&&recType[0]!==\"\"?config.typeToId[recType[0]]:\"none\");\n\t\t\t\tvar typeArr;\n\t\t\t\tvar startDate = topParent.$$(\"start_date\").getValue();\n\t\t\t\tfor(var type in config.typeToId){\n\t\t\t\t\tif(type==recType[0]){\n\t\t\t\t\t\trecType.push(startDate);\n\t\t\t\t\t\ttypeArr = webix.copy(recType);\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttypeArr = [type,1,\"\",\"\",\"\",startDate];\n\t\t\t\t\t}\n\t\t\t\t\ttopParent.$$(config.typeToId[type]).setValue(typeArr);\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetValue:function(){\n\t\t\t\tvar topParent = this.getTopParentView();\n\t\t\t\tvar type = topParent.$$(\"recList\").getSelectedId();\n\t\t\t\treturn (type==\"none\"?[\"\",\"\",\"\",\"\",\"\",\"\"]:topParent.$$(type).getValue());\n\t\t\t},\n\t\t\t_applyRecurrence:function(){\n\t\t\t\tvar topParent = this.getTopParentView();\n\t\t\t\tvar value = this.getValue();\n\t\t\t\tvar startDate = topParent.$$(\"start_date\").getValue();\n\t\t\t\tvar endDate = topParent.$$(\"end_date\").getValue();\n\t\t\t\tvar length = endDate.valueOf()-startDate.valueOf();\n\t\t\t\ttopParent.$$(\"event_length\").setValue(length/1000);\n\n\t\t\t\tif(!value[0]){\n\t\t\t\t\ttopParent.$$(\"endRepeat\").setValue(topParent.$$(\"end_date\").getValue());\n\t\t\t\t\ttopParent.$$(\"rec_type\").setValue(\"\");\n\t\t\t\t\ttopParent.$$(\"event_length\").setValue(\"\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse if(value[0]==\"week\"){\n\t\t\t\t\tstartDate = webix.Date.add(startDate,(-1)*(startDate.getDay()+6)%7,\"day\",true);\n\t\t\t\t}\n\t\t\t\telse if(value[0]==\"month\"){\n\t\t\t\t\tif(value[5])\n\t\t\t\t\t\tstartDate.setDate(value[5]);\n\t\t\t\t}\n\t\t\t\telse if(value[0]==\"year\"&&value[5]){\n\t\t\t\t\tstartDate.setMonth(value[5]);\n\t\t\t\t}\n\t\t\t\ttopParent.$$(\"start_date\").setValue(startDate);\n\t\t\t\ttopParent.$$(\"end_date\").setValue(new Date(startDate.valueOf()+length));\n\t\t\t\tvalue.pop();\n\t\t\t\tvar repeat = \"\";\n\t\t\t\tif(topParent.$$(\"endBy\").getValue()==\"0\")\n\t\t\t\t\trepeat = \"no\";\n\t\t\t\ttopParent.$$(\"rec_type\").setValue(value.join(\"_\")+\"#\"+repeat);\n\t\t\t},\n\t\t\t_setEndDate:function(){\n\t\t\t\tvar topParent = this.getTopParentView();\n\t\t\t\tvar values = topParent.$$(\"editForm\").getValues();\n\t\t\t\tvar end =  values.end_date;\n\t\t\t\tif(end.valueOf() == this.config.endlessDate.valueOf()){\n\t\t\t\t\ttopParent.$$(\"endBy\").setValue(\"0\");\n\t\t\t\t\ttopParent.$$(\"endByDate\").setValue(scheduler.config.end_by||webix.Date.add(topParent.$$(\"end_date\").getValue(),1,\"year\",true),true);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\ttopParent.$$(\"endBy\").setValue(\"1\");\n\t\t\t\t\ttopParent.$$(\"endByDate\").define(\"minDate\",end);\n\t\t\t\t\ttopParent.$$(\"endByDate\").setValue(end);\n\t\t\t\t}\n\t\t\t\tthis._setEndByVisibility();\n\t\t\t},\n\t\t\t_setEndByVisibility:function(){\n\t\t\t\tvar topParent = this.getTopParentView();\n\t\t\t\tvar value = topParent.$$(\"endBy\").getValue();\n\t\t\t\tif(value == \"1\")\n\t\t\t\t\ttopParent.$$(\"endByDate\").show();\n\t\t\t\telse\n\t\t\t\t\ttopParent.$$(\"endByDate\").hide();\n\t\t\t}\n\t\t}, webix.DataLoader, webix.ui.form, webix.EventSystem, webix.Settings);\n\t});\n\n};","export const values = {\n\tday_event_style: function(obj){\n\t\tvar style = \"\";\n\t\tif(obj.color){\n\t\t\tvar rgb = webix.color.toRgb(obj.color);\n\t\t\tstyle += \";border-color:\"+obj.color+\";\";\n\t\t\tstyle += \"background-color:rgba(\"+rgb.toString()+\",0.3);\";\n\t\t\tvar hsv = webix.color.rgbToHsv(rgb[0],rgb[1],rgb[2]);\n\t\t\thsv[2] /= 1.6;\n\t\t\tvar color = \"rgb(\"+webix.color.hsvToRgb(hsv[0],hsv[1],hsv[2])+\")\";\n\t\t\tstyle += \"color:\"+color;\n\t\t}\n\t\treturn style;\n\t},\n\tmulti_day_event_style: function(obj){\n\t\tvar style = \"\";\n\t\tif(obj.color){\n\t\t\tvar rgb = webix.color.toRgb(obj.color);\n\n\t\t\tstyle += \";background-color:rgba(\"+rgb.toString()+\",0.3);\";\n\t\t\tvar hsv = webix.color.rgbToHsv(rgb[0],rgb[1],rgb[2]);\n\t\t\thsv[2] /= 1.6;\n\t\t\tvar color = \"rgb(\"+webix.color.hsvToRgb(hsv[0],hsv[1],hsv[2])+\")\";\n\t\t\tstyle += \"color:\"+color;\n\t\t}\n\t\treturn style;\n\t},\n\tselected_event : function(obj){\n\t\tvar html = \"\", fts=\"\", fte=\"\";\n\t\tvar start = obj.start_date;\n\t\tvar end = obj.end_date;\n\n\t\tif(!start) return html;\n\t\thtml += \"<div  class='selected_event \"+scheduler.templates.event_class(obj)+\"'  >\";\n\t\thtml += \"<div class='event_title'>\"+obj.text+\"</div>\";\n\n\t\tif(webix.Date.datePart(start,true).valueOf()==webix.Date.datePart(end,true).valueOf()){\n\t\t\tvar fd = webix.i18n.dateFormatStr(start);\n\t\t\tfts = webix.i18n.timeFormatStr(start);\n\t\t\tfte = webix.i18n.timeFormatStr(end);\n\t\t\thtml += \"<div class='event_text'>\"+fd+\"</div>\";\n\t\t\thtml += \"<div class='event_text'>\"+scheduler.locale.labels.label_from+\" \"+fts+\" \"+scheduler.locale.labels.label_to+\" \"+fte+\"</div>\";\n\t\t}\n\t\telse{\n\t\t\tvar fds = webix.i18n.longDateFormatStr(start);\n\t\t\tvar fde = webix.i18n.longDateFormatStr(end);\n\t\t\t/*if not \"all-day\" event*/\n\t\t\tif(!(webix.Date.datePart(start,true).valueOf()==start.valueOf()&&webix.Date.datePart(end,true).valueOf()==end.valueOf())){\n\t\t\t\tfts = webix.i18n.timeFormatStr(start)+\" \";\n\t\t\t\tfte = webix.i18n.timeFormatStr(end)+\" \";\n\t\t\t}\n\t\t\thtml += \"<div class='event_text'>\"+scheduler.locale.labels.label_from+\" \"+fts+fds+\"</div>\";\n\t\t\thtml += \"<div class='event_text'>\"+scheduler.locale.labels.label_to+\" \"+fte+fde+\"</div>\";\n\t\t}\n\t\tif(obj.details&&obj.details!==\"\"){\n\t\t\thtml += \"<div class='event_title'>\"+scheduler.locale.labels.label_details+\"</div>\";\n\t\t\thtml += \"<div class='event_text'>\"+obj.details+\"</div>\";\n\t\t}\n\t\thtml += \"</div>\";\n\t\treturn html;\n\t},\n\tweek_title: function(date){\n\t\tvar start = webix.Date.weekStart(date);\n\t\tvar end = webix.Date.add(start,6,\"day\",true);\n\t\treturn \"<div aria-live='assertive' aria-atomic='true'>\"+webix.i18n.headerWeekFormatStr(start)+\"&nbsp;-&nbsp;\"+webix.i18n.headerWeekFormatStr(end)+\"</div>\";\n\t},\n\tday_title:function(date){\n\t\treturn \"<div aria-live='assertive' aria-atomic='true'>\"+webix.i18n.headerFormatStr(date)+\"</div>\";\n\t},\n\tcalendar_event : function(day){\n\t\treturn \"<div class='webix_cal_day_event'>\"+day.getDate()+\"</div>\"+\"<div class='webix_cal_event_marker'></div>\";\n\t},\n\tcalendar_day : function(day){\n\t\treturn day.getDate();\n\t},\n\tevent_date: function(value){\n\t\tvar date = new Date(parseInt(value,10));\n\t\tvar isCurrent = (webix.Date.datePart(date).valueOf() == webix.Date.datePart(new Date()).valueOf());\n\t\treturn \"<span class='webix_unit_header_inner\"+(isCurrent?\" today\":\"\")+\"'>\"+webix.i18n.weekDateFormatStr(date)+\"</span>\";\n\t},\n\tevent_time : function(obj){\n\t\tvar start = obj.start_date;\n\t\tvar end = obj.end_date;\n\t\tif(!(webix.Date.datePart(start,true).valueOf()==start.valueOf()&&webix.Date.datePart(end,true).valueOf()==end.valueOf()))\n\t\t\treturn webix.i18n.timeFormatStr(start);\n\t\telse\n\t\t\treturn scheduler.locale.labels.label_allday;\n\t},\n\tevent_marker : function(obj){\n\t\tvar style = \"\";\n\t\tif(obj.color){\n\t\t\tvar rgb = webix.color.toRgb(obj.color);\n\t\t\tstyle += \";border-color:\"+obj.color+\";\";\n\t\t\tstyle += \"background-color:rgba(\"+rgb.toString()+\",0.9);\";\n\n\t\t}\n\t\treturn \"<div class='webix_event_marker' ><div style='\"+style+\"'></div></div>\";\n\t},\n\tevent_title: function(obj,type){\n\t\treturn \"<div class='webix_event_overall \"+type.eventClass(obj,type)+\"'><div class='webix_event_time'>\"+type.timeStart(obj)+\"</div>\"+type.marker(obj,type)+\"<div class='webix_event_text' \"+(obj.textColor?\"style='color:\"+obj.textColor:\"\")+\"'>\"+obj.text+\"</div></div>\";\n\t},\n\tmonth_event_title : function(obj,type){\n\t\treturn \"<div class='webix_event_overall \"+type.eventClass(obj,type)+\"'><div class='webix_event_time'>\"+type.timeStart(obj)+\"</div>\"+type.marker(obj,type)+\"<div class='webix_event_text' \"+(obj.textColor?\"style='color:\"+obj.textColor:\"\")+\"'>\"+obj.text+\"</div></div>\";\n\t},\n\tday_event: function(obj){\n\t\treturn obj.text;\n\t},\n\tmulti_day_event: function(obj){\n\t\treturn obj.text;\n\t},\n\tnew_event_data: function(){\n\t\tvar hours = (webix.Date.add(new Date(),1,\"hour\",true)).getHours();\n\t\tvar start = webix.Date.copy(this.coreData.getValue());\n\t\tstart.setHours(hours);\n\t\tvar end = webix.Date.add(start,1,\"hour\",true);\n\t\treturn {start_date:start,end_date:end};\n\t},\n\tevent_class: webix.template(\"\")\n};","webix.protoUI({\n\tname:\"dayevents\",\n\tdefaults:{\n\t\thourFormat:\"%H\",\n\t\thourClock:12,\n\t\tfirstHour:0,\n\t\tlastHour:24,\n\t\ttimeScaleWidth:25,\n\t\tminEventHeight: 20,\n\t\ttimeScaleHeight: 40,\n\t\tscroll:true,\n\t\tscaleBorder:1,\n\t\teventOffset:5,\n\t\tseparateShortEvents: true,\n\t\tdate: new Date()\n\t},\n\t$init:function(config){ \n\t\tthis.name = \"DayEvents\";\n\n\t\tthis._dataobj = this.$view.firstChild;\n\t\tthis._dataobj.style.position = \"relative\";\n\t\tthis.$view.className += \" webix_dayevents\";\n\t\tthis.data.provideApi(this,true);\n\t\tthis.data.attachEvent(\"onStoreUpdated\",webix.bind(this.render,this));\n\t\t\n\n\t\tif(window.scheduler){\n\t\t\tconfig.hourFormat = scheduler.config.scale_hour;\n\t\t\tconfig.timeScaleWidth = scheduler.xy.scale_width;\n\t\t\tconfig.minEventHeight = scheduler.xy.min_event_height;\n\t\t\tconfig.timeScaleHeight = scheduler.xy.scale_height*2;\n\t\t\tconfig.separateShortEvents = scheduler.config.separate_short_events;\n\t\t}\n\t},\n\trender: function(){\n\t\tif (!this.isVisible(this.config.id) || this.$blockRender)\n\t\t\treturn;\n\n\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\n\t\t\tthis._renderScale();\n\t\t\tthis.type.color = this.config.color;\n\t\t\tthis.type.textColor = this.config.textColor;\n\t\t\tthis._prepareEvents();\n\t\t\tif(window.scheduler&&scheduler.templates){\n\t\t\t\tthis.type.template = scheduler.templates.day_event;\n\t\t\t\tthis.type.templateCss = scheduler.templates.event_class;\n\t\t\t}\n\t\t\tthis._dataobj.firstChild.innerHTML = this.data.getRange().map(this._toHTML,this).join(\"\");\n\t\t\tthis._htmlmap = null; //clear map, it will be filled at first getItemNode\n\t\t\tthis.callEvent(\"onAfterRender\",[]);\n\n\t\t}\n\t},\n\tgetItemNode:function(search_id){\n\t\tif (this._htmlmap)\n\t\t\treturn this._htmlmap[search_id];\n\t\t\t\n\t\t//fill map if it doesn't created yet\n\t\tthis._htmlmap={};\n\t\t\n\t\tvar t = this._dataobj.firstChild.childNodes;\n\t\tfor (var i=0; i < t.length; i++){\n\t\t\tvar id = t[i].getAttribute(this._id); //get item's\n\t\t\tif (id)\n\t\t\t\tthis._htmlmap[id]=t[i];\n\t\t}\n\t\t//call locator again, when map is filled\n\t\treturn this.getItemNode(search_id);\n\t},\n\t_toHTML:function(obj){\n\t\tvar mark = this.data.getMark(obj.id, \"webix_selected\")?\" webix_selected\":\"\";\n\t\t//check if related template exist\n\t\tthis.callEvent(\"onItemRender\",[obj]);\n\t\tvar content = (obj.$template?this.type[\"template\"+obj.$template]:this.type.template)(obj,this.type,mark);\n\t\treturn this.type.templateStart(obj,this.type, mark)+content+this.type.templateEnd(obj, this.type,mark);\n\t},\n\t_renderScale:function(){\n\t\tvar html = \"<div role='presentation'></div>\";\n\t\tfor(var h = this.config.firstHour; h<this.config.lastHour; h++){\n\t\t\thtml += this.hourScaleItem(h);\n\t\t}\n\t\tthis._dataobj.innerHTML = html;\n\t},\n\ton_click:{\n\t},\n\thourScaleItem: function(hour){\n\t\tvar hourFormat = this.config.hourFormat;\n\n\n\t\tvar  d = new Date();\n\t\td.setHours(hour);\n\t\thour = webix.Date.dateToStr(hourFormat)(d);\n\n\t\tvar html = \"\";\n\t\tvar timeScaleWidth = this.config.timeScaleWidth;\n\t\tvar hourHeight = this.config.timeScaleHeight;\n\t\tvar sectionWidth = Math.floor(this.config.timeScaleWidth);\n\t\tvar heightTop = Math.floor(hourHeight/2);\n\t\tvar eventZoneWidth = this.$width-this.config.scaleBorder-timeScaleWidth;\n\t\thtml += \"<div style='width: 100%; height:\"+hourHeight+\"px;' class='webix_dayevents_scale_item'>\";\n\t\thtml += \"<div class='webix_dayevents_scale_hour' style='width:\"+sectionWidth+\"px; height:\"+hourHeight+\"px;line-height:\"+hourHeight+\"px;'>\"+hour+\"</div>\";\n\t\thtml += \"<div class='webix_dayevents_scale_event'  style='width:\"+eventZoneWidth+\"px'>\";\n\t\thtml += \"<div class='webix_dayevents_scale_top' style='height:\"+heightTop+\"px;width:\"+eventZoneWidth+\"px'></div>\";\n\t\thtml += \"</div>\";\n\t\thtml += \"</div>\";\n\t\treturn html;\t\t\n\t},\n\ttype:{\n\t\taria:function(obj, common,sel){\n\t\t\treturn \"role='option'\"+(sel?\" aria-selected='true' tabindex='0'\":\" tabindex='-1'\");\n\t\t},\n\t\ttemplateStart:webix.template(\"<div webix_l_id='#id#' {common.aria()} class='{common.classname()} {common.templateCss()}' style='left:#$left#px;top:#$top#px;width:#$width#px;height:#$height#px;padding:{common.padding}px;overflow:hidden; {common.templateColor()} ;'>\"),\n\t\ttemplate:\"#text#\",\n\t\ttemplateEnd:webix.template(\"</div>\"),\n\t\ttemplateCss:webix.template(\"\"),\n\t\ttemplateColor: function(obj){\n\t\t\treturn (window.scheduler?scheduler.templates.day_event_style(obj):\"\");\n\t\t},\n\t\tclassname:function(obj, common, sel){\n\t\t\tvar css = \"webix_dayevents_event_item\"+sel;\n\t\t\treturn css;\n\t\t},\n\t\tpadding:4\n\t},\n\t_prepareEvents:function(){\n\t\tvar evs = this.data.getRange();\n\t\tvar stack = [];\n\t\tvar ev,i,j,k,_is_sorder,_max_sorder,_sorder_set;\n\t\tthis._minMappedDuration = Math.ceil(this.config.minEventHeight * 60 / (this.config.timeScaleHeight+1));  // values could change along the way\n\t\tfor(i=0; i< evs.length;i++){\n\t\t\tev=evs[i];\n\t\t\tev.$inner=false;\n\t\t\twhile (stack.length && this._getEventEndDate(stack[stack.length-1]).valueOf()<=ev.start_date.valueOf()){\n\t\t\t\tstack.splice(stack.length-1,1);\n\t\t\t}\n\t\t\t_sorder_set = false;\n\t\t\t\n\t\t\tfor(j=0;j< stack.length;j++){\n\t\t\t\tif(this._getEventEndDate(stack[j]).valueOf()<=ev.start_date.valueOf()){\n\t\t\t\t\t_sorder_set = true;\n\t\t\t\t\tev.$sorder=stack[j].$sorder;\n\t\t\t\t\tstack.splice(j,1);\n\t\t\t\t\tev.$inner=true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (stack.length) stack[stack.length-1].$inner=true;\n\t\t\t\n\t\t\tif(!_sorder_set){\n\t\t\t\tif(stack.length){\n\t\t\t\t\tif(stack.length<=stack[stack.length-1].$sorder){\n\t\t\t\t\t\tif(!stack[stack.length-1].$sorder)\n\t\t\t\t\t\t\tev.$sorder = 0; \n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tfor(j=0;j<stack.length;j++){\n\t\t\t\t\t\t\t\t_is_sorder = false;\n\t\t\t\t\t\t\t\tfor(k=0;k<stack.length;k++){\n\t\t\t\t\t\t\t\t\tif(stack[k].$sorder==j){\n\t\t\t\t\t\t\t\t\t\t_is_sorder = true;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(!_is_sorder){\n\t\t\t\t\t\t\t\t\tev.$sorder = j; \n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\tev.$inner = true;\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\t_max_sorder = stack[0].$sorder;\n\t\t\t\t\t\tfor(j =1;j < stack.length; j++)\n\t\t\t\t\t\t\tif(stack[j].$sorder>_max_sorder)\n\t\t\t\t\t\t\t\t_max_sorder = stack[j].$sorder;\n\t\t\t\t\t\tev.$sorder = _max_sorder+1;\n\t\t\t\t\t\tev.$inner = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse \n\t\t\t\t\tev.$sorder = 0; \n\t\t\t}\n\t\t\tstack.push(ev);\n\t\t\tif (stack.length>(stack.max_count||0)) stack.max_count=stack.length;\n\t\t}\n\t\t\n\t\tfor (let i=0; i < evs.length; i++){ \n\t\t\tevs[i].$count=stack.max_count;\n\t\t\tthis._setPosition(evs[i]);\n\t\t}\n\t},\n\t_setPosition:function(ev){\n\t\t\n\t\tvar date = this.config.date.getValue?this.config.date.getValue():this.config.date;\n\t\t\n\t\tvar start = webix.Date.copy(ev.start_date);\n\t\tvar end = webix.Date.copy(ev.end_date);\n\t\tvar sh = start.getHours();\n\t\tvar eh = end.getHours();\n\t\tif(webix.Date.datePart(start,true).valueOf()>webix.Date.datePart(end,true).valueOf()){\n\t\t\tend = start;\n\t\t}\n\t\t\n\t\tif(webix.Date.datePart(start,true).valueOf()<webix.Date.datePart(date,true).valueOf()){\n\t\t\tstart = webix.Date.datePart(date);\n\t\t}\n\t\tif(webix.Date.datePart(end,true).valueOf()>webix.Date.datePart(date,true).valueOf()){\n\t\t\tend = webix.Date.datePart(date,true);\n\t\t\tend.setMinutes(0);\n\t\t\tend.setHours(this.config.lastHour);\n\t\t}\n\t\tif (sh < this.config.firstHour || eh >= this.config.lastHour){\n\t\t\tif (sh < this.config.firstHour){\n\t\t\t\tstart.setHours(this.config.firstHour);\n\t\t\t\tstart.setMinutes(0);\n\t\t\t}\n\t\t\tif (eh >= this.config.lastHour){\n\t\t\t\tend.setMinutes(0);\n\t\t\t\tend.setHours(this.config.lastHour);\n\t\t\t}\n\t\t}\n\t\tvar temp_width = Math.floor((this.$width-this.config.timeScaleWidth-this.config.eventOffset)/ev.$count);\n\t\tev.$left=ev.$sorder*(temp_width)+this.config.timeScaleWidth+this.config.eventOffset;\n\t\tif (!ev.$inner) temp_width=temp_width*(ev.$count-ev.$sorder);\n\t\tev.$width = temp_width-this.config.eventOffset-this.type.padding*2;\n\t\t\n\t\tvar sm = start.getHours()*60+start.getMinutes();\n\t\tvar em = (end.getHours()*60+end.getMinutes())||(this.config.lastHour*60);\n\t\tev.$top = Math.round((sm-this.config.firstHour*60)*(this.config.timeScaleHeight+1)/60); //42px/hour\n\t\tev.$height = Math.max(this.config.minEventHeight,(em-sm)*(this.config.timeScaleHeight+1)/60-1)-this.type.padding*2;\n\t},\n\t_getEventEndDate: function(ev) {\n\t\tvar end_date = ev.end_date;\n\t\tif (this.config.separateShortEvents) {\n\t\t\tvar ev_duration = (ev.end_date - ev.start_date) / 60000; // minutes\n\t\t\tif (ev_duration < this.config.minEventHeight) {\n\t\t\t\tend_date = webix.Date.add(end_date, this._minMappedDuration - ev_duration, \"minute\",true);\n\t\t\t}\n\t\t}\n\t\treturn end_date;\n\t},\n\t$setSize:function(x,y){ \n\t\tif (webix.ui.view.prototype.$setSize.call(this,x,y)){\n\t\t\tthis.render();\n\t\t}\n\t}\n}, webix.ui.list);\n","webix.protoUI({\n\tname:\"datetext\",\n\tdefaults:{\n\t\t/*template:function(obj,common){\n\t\t\treturn common._render_div_block(obj, common);\n\t\t},*/\n\t\ticon: \"wxi-angle-right\"\n\t},\n\t$renderIcon:function(){\n\t\tvar config = this.config,\n\t\t\theight = config.aheight - 2*config.inputPadding,\n\t\t\tpadding = (height - 18)/2-1;\n\t\treturn config.icon?(\"<span style='height:\"+(height-padding)+\"px;padding-top:\"+padding+\"px;' class='webix_input_icon  \"+config.icon+\"'></span>\"):\"\";\n\t},\n\t$init:function(){\n\t\tthis.attachEvent(\"onAfterRender\", webix.once(this._after_render, this));\n\t},\n\t_after_render:function(){\n\t\twebix.event(this.getInputNode(), \"keydown\", function(e){\n\t\t\tvar code = e.which || e.keyCode;\n\t\t\tif(code == 32 || code == 13 || code ==39) //space, enter, right\n\t\t\t\twebix.html.triggerEvent(document.activeElement, \"MouseEvents\", \"click\");\n\t\t}, this);\n\t},\n\tsetValue:function(value, forceReset){\n\t\tvar oldvalue = this.config.value;\n\t\tvar changed = true;\n\t\tif (oldvalue == value){\n\t\t\tchanged = false;\n\t\t\tif(!forceReset)\n\t\t\t\treturn false;\n\t\t}\n\n\t\tthis.config.value = value;\n\t\tif (this.getInputNode())\n\t\t\tthis.$setValue(value);\n\n\t\tif(changed)\n\t\t\tthis.callEvent(\"onChange\", [value, oldvalue]);\n\t},\n\t$setValue:function(value){\n\t\tthis.config.value = (value||\"\");\n\t\tvar format = (this.config.dateFormatStr||webix.i18n.dateFormatStr);\n\t\tthis.config.text = this.getInputNode().innerHTML = (typeof this.config.value==\"object\"?(format(this.config.value)):this.config.value);\n\t},\n\tdateFormat_setter:function(value){\n\t\tthis.config.dateFormatStr = webix.Date.dateToStr(value);\n\t\treturn webix.Date.strToDate(value);\n\t},\n\tgetValue:function(){\n\t\treturn this.config.value||null;\n\t},\n\tgetInputNode: function(){\n\t\treturn this.$view.getElementsByTagName(\"DIV\")[1];\n\t}\n}, webix.ui.richselect);","webix.protoUI({\n\tname:\"weekevents\",\n\ton_click: {\n\t},\n\trender:function(id,data){\n\t\tif (!this.isVisible(this.config.id))\n\t\t\treturn;\n\n\t\t//full reset\n\t\tif (this.callEvent(\"onBeforeRender\",[this.data])){\n\t\t\tthis.units = null;\n\t\t\tthis._htmlmap = null; //clear map, it will be filled at first getItemNode\n\t\t\tthis._setUnits();\n\t\t\tif(this.units){\n\t\t\t\tdata = this._getUnitRange();\n\t\t\t\tif(!data.length)\n\t\t\t\t\tthis.$view.firstChild.innerHTML = \"<div class='webix_noevents'>\"+this.config.noEvents+\"</div>\";\n\t\t\t\telse\n\t\t\t\t\tthis.$view.firstChild.innerHTML = data.map(this._toHTML, this).join(\"\");\n\t\t\t}\n\t\t\tthis.callEvent(\"onAfterRender\",[]);\n\t\t}\n\t},\n\t_toHTML:function(obj){\n\t\tvar mark = this.data.getMark(obj.id, \"webix_selected\")?\" webix_selected\":\"\";\n\t\t//check if related template exist\n\t\tthis.callEvent(\"onItemRender\",[obj]);\n\t\tif(obj.$unit){\n\t\t\treturn this.type.templateStartHeader(obj,this.type)+this.type.templateHeader.call(this,obj.$unit)+this.type.templateEnd(obj, this.type);\n\t\t}\n\t\treturn this.type.templateStart(obj,this.type, mark)+(obj.$template?this.type[\"template\"+obj.$template]:this.type.template)(obj,this.type)+this.type.templateEnd(obj, this.type);\n\t},\n\t_getUnitRange:function(){\n\t\tvar data,i,u,unit;\n\t\tdata = [];\n\t\tfor(u in this.units){\n\t\t\tdata.push({$unit:u});\n\t\t\tunit = this.units[u];\n\t\t\tfor(i=0;i < unit.length;i++){\n\t\t\t\tvar event = webix.extend({},unit[i]);\n\t\t\t\tdata.push(event);\n\t\t\t}\n\t\t}\n\n\t\treturn webix.toArray(data);\n\t},\n\t_setUnits: function(){\n\t\tvar scheduler = this.getTopParentView();\n\t\tvar d = scheduler.coreData.getValue();\n\n\t\tvar start = webix.Date.weekStart(d);\n\t\tvar end = webix.Date.add(start,1,\"week\",true);\n\n\t\tthis.units = {};\n\t\twhile(start.valueOf()<end.valueOf()){\n\t\t\tvar next = webix.Date.add(start,1,\"day\",true);\n\t\t\tvar result = scheduler._correctEventsDates(start,scheduler.getEvents(start, next));\n\t\t\tif(result.length)\n\t\t\t\tthis.units[start.valueOf()] = result;\n\n\t\t\tstart = webix.Date.add(start,1,\"day\",true);\n\t\t}\n\t},\n\n\ttype:{\n\t\theaderHeight: 28,\n\t\tmargin:0, padding:0,\n\t\taria:function(obj, common, sel){\n\t\t\treturn \" role='option'\"+(sel?\" aria-selected='true' tabindex='0'\":\" tabindex='-1'\");\n\t\t},\n\t\ttemplateHeader: function(value){\n\t\t\tvar date = new Date(parseInt(value,10));\n\t\t\tvar isCurrent = (webix.Date.datePart(date).valueOf() == webix.Date.datePart(new Date()).valueOf());\n\t\t\treturn \"<span class='webix_unit_header_inner\"+(isCurrent?\" current\":\"\")+\"'>\"+webix.i18n.weekDateFormatStr(date)+\"</span>\";\n\t\t},\n\t\ttemplateStart:function(obj,type, sel){\n\t\t\tif(obj.$unit)\n\t\t\t\treturn type.templateStartHeader.apply(this,arguments);\n\t\t\tvar className = \"webix_list_item webix_list_\"+(type.css)+\"_item\"+(obj.$selected?\"_selected\":\"\")+sel;\n\t\t\tvar style = \"width:auto; height:\"+type.height+\"px; padding:\"+type.padding+\"px; margin:\"+type.margin+\"px; overflow:hidden;\"+(type.layout&&type.layout==\"x\"?\"float:left;\":\"\");\n\t\t\tvar aria = type.aria(obj, type, sel);\n\t\t\treturn \"<div webix_l_id='\"+obj.id+\"' class='\"+className+\"' style='\"+style+\"' \"+aria+\">\";\n\t\t},\n\t\ttemplateStartHeader:function(obj,type){\n\t\t\tvar className = \"webix_unit_header webix_unit_\"+(type.css)+\"_header\"+(obj.$selected?\"_selected\":\"\");\n\t\t\tvar style = \"width:auto; height:\"+type.headerHeight+\"px; overflow:hidden;\";\n\t\t\treturn \"<div webix_unit_id='\"+obj.$unit+\"' class='\"+className+\"' style='\"+style+\"'>\";\n\t\t}\n\t}\n}, webix.ui.list);","webix.protoUI({\n\tname:\"ariabutton\",\n\t$cssName:\"button\",\n\t$renderInput:function(obj){\n\t\tvar css = \"class='webixtype_\"+(obj.type||\"base\")+\"' \";\n\t\treturn \"<button type='button' aria-label='\"+webix.template.escape(obj.label||obj.value)+\"'\"+css+\"></button>\";\n\t}\n}, webix.ui.button);\n\n","webix.protoUI({\n\tname:\"datecells\",\n\tdefaults:{\n\t\tcss: \"webix_datecells\",\n\t\tx_count:7,\n\t\tcellHeight:36\n\t},\n\t_id:\"webix_d_c\",\n\t$init:function(){\n\t\tthis._dataobj = this.$view;\n\t},\n\ton_click:{\n\t\twebix_cal_day_num:function(e,id){\n\t\t\tif(id)\n\t\t\t\tthis.define(\"activeCell\",id);\n\t\t}\n\t},\n\tactiveCell_setter:function(id){\n\t\tthis.config.activeCell = id;\n\t\tthis.render();\n\t\treturn id;\n\t},\n\trender:function(){\n\t\tif(this.isVisible(this.config.id)){\n\t\t\tvar c = 1;\n\t\t\tvar html = \"<table cellspacing='0' cellpadding='0' class='webix_rec_table'><tbody>\";\n\t\t\tvar obj = this.config.data;\n\t\t\tvar cellWidth = (this.$width/this.config.x_count);\n\n\t\t\tfor(var i in obj){\n\t\t\t\tvar style = \"\";\n\t\t\t\tvar className = \"webix_cal_day_num\";\n\n\t\t\t\tstyle += \";height:\"+this.config.cellHeight+\"px;line-height:\"+this.config.cellHeight+\"px;\";\n\t\t\t\tif(c%this.config.x_count==1)\n\t\t\t\t\thtml += \"<tr>\";\n\t\t\t\thtml += \"<td style='\"+(cellWidth?(\"width:\"+cellWidth+\"px\"):\"\")+\"'>\";\n\n\t\t\t\tif(this.config.activeCell==i)\n\t\t\t\t\tclassName+=\" webix_cal_selected_day\";\n\n\t\t\t\thtml += \"<div webix_d_c='\"+i+\"' class='\"+className+\"' style='\"+style+\"'>\"+obj[i]+\"</div>\";\n\t\t\t\thtml += \"</td>\";\n\t\t\t\tif(c%this.config.x_count===0)\n\t\t\t\t\thtml += \"</tr>\";\n\t\t\t\tc++;\n\t\t\t}\n\t\t\thtml += \"</tbody></table>\";\n\t\t\tthis.$view.innerHTML = html;\n\t\t}\n\t},\n\t$setSize:function(x,y){\n\t\tif(webix.ui.view.prototype.$setSize.call(this,x,y)){\n\t\t\tthis.render();\n\t\t}\n\t},\n\tsetValue:function(value){\n\t\tthis.define(\"activeCell\",value);\n\t},\n\tgetValue:function(){\n\t\treturn this.config.activeCell;\n\t}\n}, webix.MouseEvents, webix.ui.view, webix.EventSystem);","webix.protoUI({\n\tname:\"rectext\",\n\t$setValue:function(value){\n\t\tthis.config.value = (value||\"\");\n\t\tvar type = \"none\";\n\t\tvar recView = this.getTopParentView().$$(\"recurring\");\n\t\tvar arr = this.config.value.split(\"_\");\n\t\tif(arr[0]!==\"\")\n\t\t\ttype = recView.config.typeToId[arr[0]];\n\t\tthis.config.text = this.getInputNode().innerHTML = scheduler.locale.labels.recurring[type];\n\t}\n}, webix.ui.datetext);","webix.protoUI({\n\tname:\"endrec\",\n\tdefaults:{\n\t\theight:42\n\t},\n\tsetValue: function(value){\n\t\tvar skipEvent = false;\n\t\tvar oldvalue = this.config.value;\n\t\tif (oldvalue == value){\n\t\t\tskipEvent = true;\n\t\t}\n\t\telse{\n\t\t\tthis.config.value = value;\n\t\t}\n\t\tif (this.getInputNode())\n\t\t\tthis.$setValue(value);\n\t\tif(!skipEvent)\n\t\t\tthis.callEvent(\"onChange\", [value, oldvalue]);\n\t},\n\t$setValue:function(date){\n\t\tthis.config.value = (date||\"\");\n\t\tvar recView = this.getTopParentView().$$(\"recurring\");\n\t\tvar text;\n\t\tif(typeof date==\"object\"){\n\t\t\tif(date.valueOf()==recView.config.endlessDate.valueOf())\n\t\t\t\ttext = scheduler.locale.labels.recurring.never;\n\t\t\telse\n\t\t\t\ttext = (this.config.dateFormatStr||webix.i18n.dateFormatStr)(this.config.value);\n\t\t}\n\t\tthis.config.text = this.getInputNode().innerHTML = (text||this.config.value);\n\t}\n}, webix.ui.datetext);","webix.protoUI({\n\tname:\"reclist\",\n\tdefaults:{\n\t\t//padding:10\n\t},\n\t$init:function(){\n\t\tthis.$view.className += \" webix_reclist\";\n\t},\n\tsetValue:function(value){\n\t\tif(this.getItem(value))\n\t\t\tthis.select(value);\n\t},\n\tgetValue:function(){\n\t\treturn this.getSelected();\n\t}\n},webix.ui.list);","webix.protoUI({\n\tname:\"daily\",\n\tsetValue:function(data){\n\t\tif(typeof data == \"object\"&&data[0]==\"day\"){\n\t\t\tif(!data[1]||data[1]===\"\")\n\t\t\t\tdata[1] = 1;\n\t\t\tthis.setValues({dayCount:data[1]});\n\t\t}\n\t},\n\tgetValue:function(){\n\t\tvar data = this.getValues();\n\t\treturn [\"day\",data.dayCount,\"\",\"\",\"\",\"\"];\n\t}\n}, webix.ui.form);","webix.protoUI({\n\tname:\"weekly\",\n\tsetValue:function(data){\n\t\tif(typeof data == \"object\"&&data[0]==\"week\"){\n\t\t\tif(!data[1]&&data[1]===\"\")\n\t\t\t\tdata[1] = 1;\n\t\t\tif(!data[4]||data[4]===\"\")\n\t\t\t\tdata[4] = (data[5].getDay()+6)%7+1;\n\n\t\t\tthis.setValues({weekCount:data[1],weekDays:\"\"+data[4]});\n\t\t}\n\t},\n\tgetValue:function(){\n\t\tvar data = this.getValues();\n\t\tif(!data.weekDays)\n\t\t\tdata.weekDays = 1;\n\t\treturn [\"week\",data.weekCount,\"\",\"\",data.weekDays,\"\"];\n\t}\n}, webix.ui.form);","webix.protoUI({\n\tname:\"weeklist\",\n\tdefaults:{\n\t\tcss: \"webix_weeklist\",\n\t\telementsConfig: {labelWidth: 2, height:42 },\n\t\trows:[\n\t\t\t{view:\"checkbox\",name: 1,id:1,labelRight:webix.i18n.calendar.dayFull[1]},\n\t\t\t{view:\"checkbox\",name: 2,id:2,labelRight:webix.i18n.calendar.dayFull[2]},\n\t\t\t{view:\"checkbox\",name: 3,id:3,labelRight:webix.i18n.calendar.dayFull[3]},\n\t\t\t{view:\"checkbox\",name: 4,id:4,labelRight:webix.i18n.calendar.dayFull[4]},\n\t\t\t{view:\"checkbox\",name: 5,id:5,labelRight:webix.i18n.calendar.dayFull[5]},\n\t\t\t{view:\"checkbox\",name: 6,id:6,labelRight:webix.i18n.calendar.dayFull[6]},\n\t\t\t{view:\"checkbox\",name: 7,id:7,labelRight:webix.i18n.calendar.dayFull[0]}\n\t\t]\n\t},\n\tgetValue:function(){\n\t\tvar values = this.getValues();\n\t\tvar result = [];\n\t\tfor(var d in values)\n\t\t\tif(values[d])\n\t\t\t\tresult.push(d);\n\t\treturn result.join();\n\t},\n\tsetValue:function(values){\n\t\tvar result={};\n\t\tfor(let i=1;i < 8;i++)\n\t\t\tresult[i] =0;\n\t\tif(typeof values!=\"object\")\n\t\t\tvalues = values.split(\",\");\n\t\tfor(let i=0; i< values.length;i++)\n\t\t\tresult[parseInt(values[i],10)] = 1;\n\t\tthis.setValues(result);\n\t}\n}, webix.MouseEvents, webix.EventSystem, webix.ui.form);","webix.protoUI({\n\tname:\"monthly\",\n\tdefaults:{\n\t\tcss: \"webix_monthly\"\n\t},\n\tsetValue:function(data){\n\t\tif(typeof data == \"object\"&&data[0]==\"month\"){\n\t\t\tvar topParent = this.getTopParentView();\n\t\t\tif(!data[1]&&data[1]===\"\")\n\t\t\t\tdata[1] = 1;\n\t\t\tif(data[2]&&data[2]!==\"\")\n\t\t\t\ttopParent.$$(\"typeWeekM\").expand();\n\t\t\telse{\n\t\t\t\tdata[2] = (data[5].getDay()+6)%7+1;\n\t\t\t\tdata[3] = Math.ceil(data[5].getDate()/7);\n\t\t\t}\n\t\t\tthis.setValues({monthCount:data[1],weekDayM:data[2],weekCountM:data[3],monthDayM:data[5].getDate()});\n\t\t}\n\t},\n\tgetValue:function(){\n\t\tvar data = this.getValues();\n\t\tvar res = [\"month\",data.monthCount,\"\",\"\",\"\",\"\"];\n\t\tvar topParent = this.getTopParentView();\n\t\tif(topParent.$$(\"typeDayM\").config.collapsed){\n\t\t\tres[2] = data.weekDayM;\n\t\t\tres[3] = data.weekCountM;\n\t\t}\n\t\telse{\n\t\t\tres[5] = data.monthDayM;\n\t\t}\n\t\treturn res;\n\t}\n}, webix.ui.form);","webix.protoUI({\n\tname:\"yearly\",\n\tdefaults:{\n\t\tcss: \"webix_yearly\"\n\t},\n\tsetValue:function(data){\n\t\tif(typeof data == \"object\"&&data[0]==\"year\"){\n\t\t\tvar topParent = this.getTopParentView();\n\t\t\tif(!data[1]&&data[1]===\"\")\n\t\t\t\tdata[1] = 1;\n\t\t\tif(data[2]&&data[2]!==\"\")\n\t\t\t\ttopParent.$$(\"typeWeekY\").setValue(1);\n\t\t\telse{\n\t\t\t\ttopParent.$$(\"typeWeekY\").setValue(0);\n\t\t\t\tdata[2] = (data[5].getDay()+6)%7+1;\n\t\t\t\tdata[3] = Math.ceil(data[5].getDate()/7);\n\t\t\t}\n\t\t\ttopParent.$$(\"typeWeekY\").callEvent(\"onItemClick\",[]);\n\t\t\tthis.setValues({yearCount:data[1],weekDayY:data[2],weekCountY:data[3],monthDayY:data[5].getMonth()});\n\t\t}\n\t},\n\tgetValue:function(){\n\t\tvar data = this.getValues();\n\t\tvar res = [\"year\",data.yearCount,\"\",\"\",\"\",\"\"];\n\t\tvar topParent = this.getTopParentView();\n\t\tif(topParent.$$(\"typeWeekY\").getValue()){\n\t\t\tres[2] = data.weekDayY;\n\t\t\tres[3] = data.weekCountY;\n\t\t}\n\t\tres[5] = data.monthDayY;\n\t\treturn res;\n\t}\n}, webix.ui.form);","webix.protoUI({\n\tname:\"rec_dialog\",\n\tdefaults:{\n\t\theight:210,\n\t\tcss: \"webix_scheduler dialog\",\n\t\thead: false,\n\t\tbody:{\n\t\t\ttype:\"clean\",\n\t\t\trows:[\n\t\t\t\t{id: \"webix_confirm_message\",  template: \"<div class='webix_dialog_text'>#text#</div>\",\n\t\t\t\t\tdata:{ text: \"You have forgot to define the text :) \" }\n\t\t\t\t},\n\t\t\t\t{\theight:44, view:\"button\", label:\"Series\", click:function(){\n\t\t\t\t\tthis.getParentView().getParentView()._callback(1);\n\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ \theight:44, view:\"button\", label:\"Occurrence\", click:function(){\n\t\t\t\t\tthis.getParentView().getParentView()._callback(2);\n\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\theight:44, view:\"button\", css: \"cancel\", label:\"Cancel\", click:function(){\n\t\t\t\t\tthis.getParentView().getParentView()._callback(false);\n\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t},\n\tlabelSeries_setter:function(value){\n\t\tvar body = this._body_cell._cells[1];\n\t\tbody.config.label = value;\n\t\tbody.render();\n\t},\n\tlabelEvent_setter:function(value){\n\t\tvar body = this._body_cell._cells[2];\n\t\tbody.config.label = value;\n\t\tbody.render();\n\t},\n\tlabelCancel_setter:function(value){\n\t\tvar body = this._body_cell._cells[3];\n\t\tbody.config.label = value;\n\t\tbody.render();\n\t}\n},webix.ui.alert);\nwebix.rec_dialog = webix.single(webix.ui.rec_dialog);","import * as modLocale from \"./defaults/locale\";\nimport * as modConfig from \"./defaults/config\";\nimport * as modXY from \"./defaults/xy\";\nimport * as modTemplates from \"./defaults/templates\";\n\nimport * as rec from \"./scheduler_recurring\";\n\nimport \"./views/dayevents\";\nimport \"./views/datetext\";\nimport \"./views/weekevents\";\nimport \"./views/ariabutton\";\n\nimport \"./views/recurring/datecells\";\nimport \"./views/recurring/rectext\";\nimport \"./views/recurring/endrec\";\nimport \"./views/recurring/reclist\";\nimport \"./views/recurring/daily\";\nimport \"./views/recurring/weekly\";\nimport \"./views/recurring/weeklist\";\nimport \"./views/recurring/monthly\";\nimport \"./views/recurring/yearly\";\nimport \"./views/recurring/dialog\";\n\n\nif (!window.scheduler)\n\twindow.scheduler = {\t\n\t\tconfig:{},\n\t\ttemplates:{},\n\t\txy:{},\n\t\tlocale:{}\n\t};\n\nif(!scheduler.locale)\n\tscheduler.locale = {};\nscheduler.locale.labels = modLocale.values;\nscheduler.config = modConfig.values;\nscheduler.xy = modXY.values;\nscheduler.templates = modTemplates.values;\n\nwebix.ready(function(){\n\twebix.callEvent(\"onBeforeSchedulerInit\",[]);\n\t\n\tif (scheduler.locale&&scheduler.locale.date)\n\t\twebix.Date.Locale = scheduler.locale.date;\n\tvar config  = scheduler.config;\n\tvar labels = scheduler.locale.labels;\n\tvar templates = scheduler.templates;\n\n\tmodConfig.init();\n\t\n\t/*List types*/\n\tvar listType = {\n\t\tcssNoEvents:\"no_events\",\n\t\ttimeStart:templates.event_time,\n\t\tmarker:templates.event_marker, \n\t\teventClass:templates.event_class\n\t};\n\tscheduler.types = {\n\t\tevent_list:webix.extend({\n\t\t\tname:\"EventsList\",\n\t\t\tcss:\"events\",\n\t\t\theaderHeight: scheduler.xy.list_header_height,\n\n\t\t\theight:scheduler.xy.list_height,\n\t\t\ttemplateHeader:templates.event_date,\n\t\t\ttemplate:templates.event_title\n\t\t},listType),\n\t\tday_event_list:webix.extend({\n\t\t\tname:\"DayEventsList\",\n\t\t\tcss:\"day_events\",\n\t\t\theight:scheduler.xy.month_list_height,\n\t\t\ttemplate:templates.month_event_title\n\t\t},listType),\n\t\tmulti_day_list: {\n\t\t\tname:\"MultiDayEvents\",\n\t\t\theight: 32,\n\t\t\tcss:\"multi_day_events\",\n\t\t\tclassname:function(obj, common, marks){\n\t\t\t\tvar css = \"webix_list_item\";\n\t\t\t\tif (marks && marks.$css)\n\t\t\t\t\tcss += \" \"+marks.$css;\n\t\t\t\treturn css;\n\t\t\t},\n\t\t\taria:function(obj, common, marks){\n\t\t\t\treturn \"role='option'\"+(marks && marks.webix_selected?\" aria-selected='true' tabindex='0'\":\" tabindex='-1'\");\n\t\t\t},\n\t\t\ttemplateCss: scheduler.templates.event_class,\n\t\t\ttemplateStart:webix.template(\"<div webix_l_id='#id#' {common.aria()} class='{common.classname()} {common.templateCss()}' style='width:{common.widthSize()}; height:{common.heightSize()}; overflow:hidden;{common.templateColor()};'>\"),\n\t\t\ttemplate: templates.multi_day_event,\n\t\t\ttemplateColor: function(obj){\n\t\t\t\treturn scheduler.templates.multi_day_event_style(obj);\n\t\t\t}\n\t\t}\n\t};\n\twebix.type(webix.ui.weekevents, scheduler.types.event_list);\n\twebix.type(webix.ui.list, scheduler.types.day_event_list);\n\twebix.type(webix.ui.list, scheduler.types.multi_day_list);\n\n\twebix.DataDriver.scheduler = {\n\t\trecords:\"/*/event\"\n\t};\n\twebix.extend(webix.DataDriver.scheduler,webix.DataDriver.xml);\n\t\n\t/*the views of scheduler multiview*/\n\t\n\tvar tabViews = [\n\t\t{\n\t\t\tid:\"day\",\n\t\t\trows:[\n\t\t\t\t{\t\n\t\t\t\t\tid:\"dayBar\",\n\t\t\t\t\tview:\"toolbar\",\n\t\t\t\t\tcss:\"webix_topbar\",\n\t\t\t\t\tcols: config.day_toolbar,\n\t\t\t\t\theight:50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid:\"multiDayList\",\n\t\t\t\t\tview:\"list\",\n\t\t\t\t\tautoheight: true,\n\t\t\t\t\ttype:\"MultiDayEvents\",\n\t\t\t\t\tyCount: config.multi_day_limit\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid:\"dayList\",\n\t\t\t\t\tview:\"dayevents\"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid:\"week\",\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tid:\"weekBar\",\n\t\t\t\t\tview:\"toolbar\",\n\t\t\t\t\tcss:\"webix_topbar\",\n\t\t\t\t\telements: config.week_toolbar,\n\t\t\t\t\theight:50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"weekEventsList\",\n\t\t\t\t\tview:\"weekevents\",\n\t\t\t\t\ttype:\"EventsList\",\n\t\t\t\t\tstartDate:new Date(),\n\t\t\t\t\tnoEvents: labels.label_no_events\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid:\"month\",\n\t\t\tview: \"scrollview\",\n\t\t\tscroll:false,\n\t\t\tbody: {\n\t\t\t\trows:[\n\t\t\t\t\t{\n\t\t\t\t\t\tid:\"calendar\",\n\t\t\t\t\t\tview:\"calendar\",\n\t\t\t\t\t\twidth: 0,\n\t\t\t\t\t\ticons: false,\n\t\t\t\t\t\theight: 310,\n\t\t\t\t\t\tdayWithEvents: templates.calendar_event,\n\t\t\t\t\t\tdayNoEvents:templates.calendar_day,\n\t\t\t\t\t\tcalendarHeader:config.calendar_date\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid:\"calendarDayEvents\",\n\t\t\t\t\t\tview:\"list\",\n\t\t\t\t\t\ttype:\"DayEventsList\"\n\t\t\t\t\t}\n\n\t\t\t\t]\n\t\t\t}\n\n\t\t}\n\t].concat(config.tab_views);\n\n\tvar delete_button = {view:\"button\", height:44,\tlabel:labels.icon_delete,\tid:\"delete\", type:\"danger\" ,css:\"delete\"};\n\tif(screen.width>500){\n\t\tdelete_button.width = 300;\n\t\tdelete_button = { type:\"clean\",cols:[{},delete_button,{}] };\n\t}\n\n\tvar views = [\n\t\t{\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tview:\"multiview\",\n\t\t\t\t\tid:\"tabViews\",\n\t\t\t\t\tanimate: (webix.env.touch?{}:false),\n\t\t\t\t\tcells: tabViews\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t//view:\"toolbar\",\n\t\t\t\t\tid:\"bottomBar\",\n\t\t\t\t\tcss: \"webix_bottombar\",\n\t\t\t\t\theight: 55,\n\t\t\t\t\tpadding: 5,\n\t\t\t\t\tvisibleBatch:\"default\",\n\t\t\t\t\tcols: config.bottom_toolbar\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid:\"event\",\n\t\t\t/*animate:{\n\t\t\t\ttype:\"slide\",\n\t\t\t\tsubtype:\"in\",\n\t\t\t\tdirection:\"top\"\n\t\t\t},*/\n\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tid:\"eventBar\",\n\t\t\t\t\tview:\"toolbar\",\n\t\t\t\t\tcss:\"webix_subbar\",\n\t\t\t\t\telements: config.selected_toolbar,\n\t\t\t\t\theight:50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\tpaddingX: 10,\n\t\t\t\t\trows:[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid:\"eventTemplate\",\n\t\t\t\t\t\t\tview:\"template\",\n\t\t\t\t\t\t\tcss: \"webix_event_view\",\n\t\t\t\t\t\t\ttemplate:templates.selected_event\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdelete_button,\n\t\t\t\t\t\t{\tview:\"template\",height:20}\n\t\t\t\t\t]\n\t\t\t\t}\n\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid:\"form\",\n\t\t\trows:[\n\t\t\t\t{\t\n\t\t\t\t\tid:\"editBar\",\n\t\t\t\t\tview:\"toolbar\",\n\t\t\t\t\tcss: \"webix_subbar\",\n\t\t\t\t\telements:config.form_toolbar,\n\t\t\t\t\theight:50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid:\"editForm\",\n\t\t\t\t\tview:\"form\",\n\t\t\t\t\tscroll: true,\n\t\t\t\t\telements: config.form,\n\t\t\t\t\tmargin:2,\n\t\t\t\t\tpadding:10,\n\t\t\t\t\trules: config.form_rules,\n\t\t\t\t\telementsConfig:{\n\t\t\t\t\t\theight:42\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tid:\"formdate\",\n\t\t\trows:[\n\t\t\t\t{\t\n\t\t\t\t\tid:\"dateBar\",\n\t\t\t\t\tview:\"toolbar\",\n\t\t\t\t\tcss: \"webix_subbar\",\n\t\t\t\t\telements:config.date_toolbar,\n\t\t\t\t\theight:50\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid:\"dateForm\",\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\trows:[\n\t\t\t\t\t\t{view:\"calendar\", height:310, timepickerHeight: 35,css:\"form_calendar\", icons: false, id:\"formCalendar\", width: 0,  calendarTime:config.calendar_hour, timepicker:1,hourStart:0},\n\t\t\t\t\t\t{view:\"template\", css:\"form_template\"}\n\t\t\t\t\t] \n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t].concat(config.views);\n\t\n\twebix.protoUI({\n\t\tname:\"scheduler\",\n\t\tversion:\"{{version}}\",\n\t\tdefaults:{\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tview:\"multiview\",\n\t\t\t\t\tid:\"views\",\n\t\t\t\t\tanimate: (webix.env.touch?{}:false),\n\t\t\t\t\tcells: views\n\t\t\t\t}\n\t\t\t],\n\t\t\tcolor:\"#color#\",\n\t\t\ttextColor:\"#textColor#\"\n\t\t},\n\t\t_setDateMethods: function(){\n\t\t\twebix.i18n.dateFormat = config.item_date;\n\t\t\twebix.i18n.weekDateFormat = config.week_date;\n\t\t\twebix.i18n.formDate = config.form_date;\n\t\t\twebix.i18n.formAllDayFormat = config.form_all_day;\n\t\t\twebix.i18n.timeFormat = config.hour_date;\n\n\t\t\twebix.i18n.fullDateFormat = config.parse_date;\n\t\t\twebix.i18n.fullDateFormatUTC = config.server_utc;\n\n\t\t\twebix.i18n.longDateFormat = config.all_day_date;\n\t\t\twebix.i18n.headerFormatStr = webix.Date.dateToStr( config.day_header_date);\n\t\t\twebix.i18n.headerWeekFormatStr = webix.Date.dateToStr( config.week_header_date);\n\t\t\twebix.i18n.loadDateFormat = config.dyn_load_date;\n\n\t\t\tvar helpers = [\"formDate\",\"formAllDayFormat\",\"loadDateFormat\",\"weekDateFormat\"];\n\t\t\tfor( var i=0; i<helpers.length; i++){\n\t\t\t\tvar key = helpers[i];\n\t\t\t\tvar utc = webix.i18n[key+\"UTC\"];\n\t\t\t\twebix.i18n[key+\"Str\"] = webix.Date.dateToStr(webix.i18n[key], utc);\n\t\t\t\twebix.i18n[key+\"Date\"] = webix.Date.strToDate(webix.i18n[key], utc);\n\t\t\t}\n\t\t\twebix.i18n.setLocale();\n\t\t},\n\t\t$init: function(){\n\t\t\tthis.name = \"scheduler\";\n\t\t\tthis.$view.className += \" webix_scheduler\";\n\t\t\t/*date format functions*/\n\t\t\tthis._setDateMethods(config);\n\t\t\t\n\t\t\tthis.data.provideApi(this);\n\t\t\tthis.data.scheme({\n\t\t\t\t$init:function(data){\n\t\t\t\t\tif(typeof data.start_date==\"string\")\n\t\t\t\t\t\tdata.start_date\t= webix.i18n.fullDateFormatDate(data.start_date);\n\t\t\t\t\tif(typeof data.end_date==\"string\")\n\t\t\t\t\t\tdata.end_date \t= webix.i18n.fullDateFormatDate(data.end_date);\n\t\t\t\t},\n\t\t\t\t$update:function(data){\n\t\t\t\t\tif(typeof data.start_date==\"string\")\n\t\t\t\t\t\tdata.start_date\t= webix.i18n.fullDateFormatDate(data.start_date);\n\t\t\t\t\tif(typeof data.end_date==\"string\")\n\t\t\t\t\t\tdata.end_date \t= webix.i18n.fullDateFormatDate(data.end_date);\n\t\t\t\t},\n\t\t\t\t$serialize:function(data){\n\t\t\t\t\tvar obj = {};\n\t\t\t\t\tobj.start_date = webix.i18n.fullDateFormatStr(webix.Date.copy(data.start_date));\n\t\t\t\t\tobj.end_date = webix.i18n.fullDateFormatStr(webix.Date.copy(data.end_date));\n\t\t\t\t\twebix.extend(obj,data);\n\t\t\t\t\treturn obj;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.$ready.push(this._initStructure);\n\t\t\n\t\t\twebix.callEvent(\"onAfterSchedulerInit\",[this]);\n\t\t\t\n\t\t},\n\t\tsyncData:function(target, start, end, filter){\n\n\t\t\tvar events = this.getEvents(start, end);\n\n\t\t\tvar tpull = target.data.pull = {};\n\t\t\tvar torder = target.data.order = webix.toArray();\n\t\t\tevents = this._correctEventsDates(start, events);\n\t\t\tfor (var i=0; i<events.length; i++){\n\t\t\t\tif(!filter || filter.call(target, events[i], start, end)){\n\t\t\t\t\tvar id = events[i].id;\n\t\t\t\t\ttorder.push(id);\n\t\t\t\t\ttpull[id]=events[i];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t_syncAllViews:function(){\t\n\t\t\tthis.coreData.callEvent(\"onChange\",[]);\n\t\t\tthis.$$(\"multiDayList\").getParentView().resize();\n\t\t},\n\t\tgetWeekTitle: function(date){\n\t\t\treturn scheduler.templates.week_title(date);\n\t\t},\n\t\tgetDayTitle:function(date){\n\t\t\treturn scheduler.templates.day_title(date);\n\t\t},\n\t\tgetTodayMultiEvents:function(){\n\t\t\tvar scheduler = this.getTopParentView();\n\t\t\tvar d = webix.Date.datePart(scheduler.coreData.getValue(),true);\n\t\t\tvar next = webix.Date.add(d,1,\"day\",true);\n\t\t\tscheduler.syncData(this, d, next,function(ev){\n\t\t\t\tvar dateStart = webix.Date.datePart(ev.start_date,true);\n\t\t\t\tvar dateEnd = webix.Date.datePart(ev.end_date,true);\n\t\t\t\treturn !webix.Date.equal(dateStart, dateEnd) && ev.start_date.valueOf()<=d.valueOf()&& ev.end_date.valueOf()>=next.valueOf();\n\t\t\t});\n\t\t\tthis.resize();\n\t\t},\n\t\tgetWeekEvents:function(){\n\t\t\tvar scheduler = this.getTopParentView();\n\t\t\tvar d =  webix.Date.weekStart(scheduler.coreData.getValue());\n\t\t\tvar next = webix.Date.add(d,6,\"day\",true);\n\t\t\tvar filter = null;\n\n\t\t\tif(config.multi_day && scheduler.$$(\"weekEventsList\").isVisible())\n\t\t\t\tfilter = function(ev){\n\t\t\t\t\tvar dateStart = webix.Date.datePart(ev.start_date,true);\n\t\t\t\t\tvar dateEnd = webix.Date.datePart(ev.end_date,true);\n\t\t\t\t\treturn webix.Date.equal(dateStart, dateEnd) || ev.start_date.valueOf()>d.valueOf() || ev.end_date.valueOf()<next.valueOf()\n\t\t\t\t\t\t|| ev.start_date.valueOf()<=d.valueOf()&& ev.end_date.valueOf()>=next.valueOf();\n\t\t\t\t};\n\t\t\tscheduler.syncData(this, d, next, filter);\n\t\t},\n\t\tgetTodayEvents:function(){\n\t\t\tvar scheduler = this.getTopParentView();\n\t\t\tvar d = webix.Date.datePart(scheduler.coreData.getValue(),true);\n\t\t\tvar next = webix.Date.add(d,1,\"day\",true);\n\t\t\tvar filter = null;\n\n\t\t\tif(config.multi_day && scheduler.$$(\"dayList\").isVisible())\n\t\t\t\tfilter = function(ev){\n\t\t\t\t\tvar dateStart = webix.Date.datePart(ev.start_date,true);\n\t\t\t\t\tvar dateEnd = webix.Date.datePart(ev.end_date,true);\n\t\t\t\t\treturn webix.Date.equal(dateStart, dateEnd) || ev.start_date.valueOf()>d.valueOf() || ev.end_date.valueOf()<next.valueOf();\n\t\t\t\t};\n\t\t\tscheduler.syncData(this, d, next, filter);\n\t\t},\n\t\t_setMonthFlags:function(){\n\t\t\tif (!this.isVisible()) return;\n\t\t\tvar top = this.getTopParentView();\n\n\t\t\tvar start = webix.Date.datePart(webix.Date.copy(this.getVisibleDate()));\n\t\t\tstart.setDate(1);\n\t\t\tvar end = webix.Date.add(start,1,\"month\",true);\n\n\t\t\ttop._eventsByDate = {};\n\t\t\tvar events = top.getEvents(start, end);\n\n\t\t\twhile(start<end){\n\t\t\t\tvar next = webix.Date.add(start,1,\"day\",true);\n\t\t\t\tfor (var i=0; i<events.length; i++)\n\t\t\t\t\tif (events[i].start_date < next && events[i].end_date > start )\n\t\t\t\t\t\ttop._eventsByDate[start.valueOf()]=true;\n\t\t\t\tstart = next;\n\t\t\t}\n\t\t},\n\t\t_initHotKeys:function(){\n\t\t\t\n\t\t\tfunction click(view){\n\t\t\t\tvar id = view.getSelectedId() || view.locate(document.activeElement);\n\t\t\t\tif(id) this._on_event_clicked(id);\n\t\t\t}\n\n\t\t\twebix.UIManager.addHotKey(\"enter\", webix.bind(click, this), this.$$(\"dayList\"));\n\t\t\twebix.UIManager.addHotKey(\"enter\", webix.bind(click, this), this.$$(\"weekEventsList\"));\n\t\t\twebix.UIManager.addHotKey(\"enter\", webix.bind(click, this), this.$$(\"multiDayList\"));\n\t\t\twebix.UIManager.addHotKey(\"enter\", webix.bind(click, this), this.$$(\"calendarDayEvents\"));\n\t\t},\n\t\t_initStructure:function(){\n\t\t\tthis._initToolbars();\n\t\t\tthis._initMonth();\n\t\t\tthis._initHotKeys();\n\n\t\t\t//store current date\n\t\t\tthis.coreData = new webix.DataValue();\n\t\t\tthis.coreData.setValue(config.init_date);\n\n\t\t\tthis.$$(\"dayList\").define(\"date\",this.coreData);\n\t\t\t\n\t\t\tthis.selectedEvent = new webix.DataRecord();\n\t\t\t\n\t\t\tif(this.config.readonly){\n\t\t\t\tthis.define(\"readonly\",this.config.readonly);\n\t\t\t}\n\t\t\telse if(config.readonly)\n\t\t\t\tthis.define(\"readonly\",true);\n\t\t\t\n\n\t\t\tif(this.$$(\"date\")){\n\t\t\t\tvar dayTitle =  this.getDayTitle(config.init_date);\n\t\t\t\tthis.$$(\"date\").setValue(dayTitle);\n\t\t\t\tthis.$$(\"date\").config.label = this.$$(\"date\").config.value;\n\t\t\t\tthis.$$(\"date\").bind(this.coreData, null, webix.i18n.headerFormatStr);\n\t\t\t}\n\n\t\t\tif(this.$$(\"weekTitle\")){\n\t\t\t\tvar weekTitle = this.getWeekTitle(config.init_date);\n\t\t\t\tthis.$$(\"weekTitle\").setValue(weekTitle);\n\t\t\t\tthis.$$(\"weekTitle\").config.label = weekTitle;\n\t\t\t\tthis.$$(\"weekTitle\").bind(this.coreData, null, webix.bind(this.getWeekTitle,this));\n\t\t\t}\n\n\n\t\t\tthis.data.attachEvent(\"onStoreUpdated\", this._sortDates);\n\t\t\tthis.data.attachEvent(\"onStoreUpdated\", webix.bind(this._syncAllViews, this));\n\n\t\t\tif(config.multi_day){\n\t\t\t\tthis.$$(\"multiDayList\").define(\"dataFeed\", this.getTodayMultiEvents);\n\t\t\t\tthis.$$(\"multiDayList\").bind(this.coreData);\n\t\t\t}\n\n\t\t\tthis.$$(\"weekEventsList\").define(\"dataFeed\", this.getWeekEvents);\n\t\t\tthis.$$(\"weekEventsList\").bind(this.coreData);\n\n\t\t\t//custom data binding for day-list\n\t\t\tthis.$$(\"dayList\").define(\"dataFeed\", this.getTodayEvents);\n\t\t\tthis.$$(\"dayList\").bind(this.coreData);\n\n\t\t\tthis.$$(\"calendarDayEvents\").define(\"dataFeed\", this.getTodayEvents);\n\t\t\tthis.$$(\"calendarDayEvents\").bind(this.coreData);\n\n\t\t\tthis.$$(\"calendar\").bind(this.coreData);\n\t\t\tthis.$$(\"calendar\").attachEvent(\"onBeforeRender\", this._setMonthFlags);\n\t\t\t/*to redraw calendar when coreDate got changed */\n\t\t\tthis.coreData.attachEvent(\"onChange\", webix.bind(function(){\n\t\t\t\tif(!this._isFormCalendarZoomed){\n\t\t\t\t\tif(this._load_mode&&this._load_url)\n\t\t\t\t\t\tthis.load.apply(this,[this._load_url]);\n\t\t\t\t\tthis.$$(\"calendar\").render();\n\t\t\t\t}\n\t\t\t},this));\n\t\t\tthis.data.attachEvent(\"onClearAll\", webix.bind(function(){\n\t\t\t\tthis._loaded_ranges = {};\n\t\t\t},this));\n\n\t\t\tthis.data.attachEvent(\"onIdChange\",webix.bind(function(){\n\t\t\t\tthis._syncAllViews();\n\t\t\t},this));\n\t\t\t\n\t\t\tthis.$$(\"eventTemplate\").bind(this);\n\n\n\t\t\tthis.$$(\"weekEventsList\").attachEvent(\"onItemClick\", webix.bind(this._on_event_clicked, this));\n\t\t\tthis.$$(\"dayList\").attachEvent(\"onItemClick\", webix.bind(this._on_event_clicked, this));\n\t\t\tthis.$$(\"multiDayList\").attachEvent(\"onItemClick\", webix.bind(this._on_event_clicked, this));\n\t\t\tthis.$$(\"calendarDayEvents\").attachEvent(\"onItemClick\", webix.bind(this._on_event_clicked, this));\n\n\t\t\tthis.$$(\"tabViews\").attachEvent(\"onViewChange\", webix.bind(this._onViewChanged, this));\n\t\t\tthis.attachEvent(\"onBeforeEventShow\", webix.bind(this._onViewChanged, this));\n\n\t\t\tthis.$$(config.mode||\"week\").show(false,false);\n\t\t\tthis._initForm();\n\n\t\t},\n\t\t_initForm: function(){\n\n\t\t\tthis.$$(\"editForm\").bind(this);\n\n\t\t\t/*Start and End date selection*/\n\t\t\tthis.dateField = new webix.DataValue();\n\t\t\tthis.dateField.setValue(\"start_date\");\n\t\t\tthis.$$(\"datetype\").bind(this.dateField, null, function(value){\n\t\t\t\treturn (value == \"start_date\"?labels.label_start:labels.label_end);\n\t\t\t});\n\n\t\t\tthis.$$(\"formCalendar\").attachEvent(\"onAfterZoom\",webix.bind(function(zoom){\n\t\t\t\tthis._isFormCalendarZoomed = !!zoom;\n\t\t\t\tif(zoom){\n\t\t\t\t\tthis.$$(\"cancel_date\").hide();\n\t\t\t\t}\n\t\t\t},this));\n\t\t\tthis.$$(\"formCalendar\").attachEvent(\"onBeforeRender\", webix.bind(function(){\n\t\t\t\tthis.$$(\"cancel_date\").show();\n\t\t\t},this));\n\t\t},\n\t\t_onViewChanged:function(){\n\t\t\tthis.$$(\"multiDayList\").unselectAll();\n\t\t\tthis.$$(\"dayList\").unselectAll();\n\t\t\tthis.$$(\"weekEventsList\").unselectAll();\n\t\t\tthis.$$(\"calendarDayEvents\").unselectAll();\n\t\t},\n\t\t_on_event_clicked:function(id){\n\t\t\tthis._last_selected = (id||\"\").toString().split(\"#\");\n\t\t\tif (this._last_selected[1])\n\t\t\t\tthis.setCursor(null);\n\t\t\tthis.setCursor(this._last_selected[0]);\n\t\t\tif(this.callEvent(\"onBeforeEventShow\",[this._last_selected[0]]))\n\t\t\t\tthis.$$(\"event\").show();\n\n\t\t},\n\t\t/*Sorts dates asc, gets hash of dates with event*/\n\t\t_sortDates:function(){\n\t\t\tthis.blockEvent();\n\t\t\tthis.sort(function(a,b){\n\t\t\t\treturn a.start_date < b.start_date?-1:1;\n\t\t\t});\n\t\t\tthis.unblockEvent();\n\t\t},\n\t\t/* Month Events view: sets event handlers */\n\t\t_initMonth:function(){\n\t\t\tthis.$$(\"calendar\").attachEvent(\"onDateSelect\",webix.bind(function(date){\n\t\t\t\tthis._isMonthCalendarZoomed = false;\n\t\t\t\tthis.setDate(date);\n\t\t\t},this));\n\n\t\t\tthis.$$(\"calendar\").attachEvent(\"onChange\", webix.bind(function(date){\n\t\t\t\tif(!this._isMonthCalendarZoomed){\n\t\t\t\t\tthis.$$(\"calendar\").blockEvent();\n\t\t\t\t\tthis.setDate(date);\n\t\t\t\t\tthis.$$(\"calendar\").unblockEvent();\n\t\t\t\t}\n\t\t\t},this));\n\n\t\t\tthis.$$(\"calendar\").attachEvent(\"onAfterZoom\", webix.bind(function(zoom){\n\t\t\t\tthis._isMonthCalendarZoomed = !!zoom;\n\t\t\t\tif(!zoom)\n\t\t\t\t\tthis.$$(\"calendar\").callEvent(\"onBeforeMonthChange\",[null, this.$$(\"calendar\").config.date]);\n\t\t\t}, this));\n\n\t\t\tthis.$$(\"calendar\").attachEvent(\"onBeforeMonthChange\",webix.bind(function(oldDate, date){\n\t\t\t\tif(!this._isFormCalendarZoomed){\n\t\t\t\t\tvar today = new Date();\n\t\t\t\t\tif(date.getMonth()===today.getMonth()&&date.getYear()===today.getYear())\n\t\t\t\t\t\tdate = today;\n\t\t\t\t\telse\n\t\t\t\t\t\tdate.setDate(1);\n\n\t\t\t\t\tif(!this._isMonthCalendarZoomed){\n\t\t\t\t\t\tif(this.$$(\"tabViews\").config.animate){\n\t\t\t\t\t\t\twebix.ui.animateView(this.$$(\"month\").getBody(), webix.bind(function(){\n\t\t\t\t\t\t\t\tthis.setDate(date);\n\t\t\t\t\t\t\t},this), {type: \"slide\", direction: (oldDate < date ?\"left\":\"right\") });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.setDate(date);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},this));\n\n\t\t\tthis.$$(\"calendar\").config.dayTemplate = webix.bind(function(date){\n\t\t\t\tif(this._eventsByDate && this._eventsByDate[date.valueOf()])\n\t\t\t\t\treturn this.$$(\"calendar\").config.dayWithEvents(date);\n\t\t\t\treturn this.$$(\"calendar\").config.dayNoEvents(date);\n\t\t\t},this);\n\t\t},\n\t\tgetEvents:function(from,to){\n\n\t\t\tif (!to) to = new Date(9999,0,1);\n\n\t\t\tvar result = [];\n\t\t\tvar evs = this.data.getRange();\n\n\t\t\tfor(var i = 0; i < evs.length;i++){\n\t\t\t\tif ((evs[i].start_date<to) && (evs[i].end_date>from))\n\t\t\t\t\tresult.push(webix.copy(evs[i]));\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\t_correctEventsDates: function(date,events){\n\n\t\t\tvar event;\n\t\t\tvar result = [];\n\t\t\tif(events)\n\t\t\t\tfor(var i=0; i< events.length;i++){\n\t\t\t\t\tevent = {\n\t\t\t\t\t\tstart_date: webix.Date.copy(events[i].start_date),\n\t\t\t\t\t\tend_date: webix.Date.copy(events[i].end_date)\n\t\t\t\t\t};\n\t\t\t\t\twebix.extend(event,events[i]);\n\t\t\t\t\tif(event.start_date.valueOf()< date.valueOf()){\n\t\t\t\t\t\tevent.start_date = webix.Date.add(webix.Date.datePart(event.start_date),1,\"day\",true);\n\t\t\t\t\t}\n\t\t\t\t\tvar id = (id||\"\").toString().split(\"#\");\n\t\t\t\t\tvar endDate = event.rec_type?new Date(id[1]*1000+event.event_length*1000):event.end_date;\n\t\t\t\t\tif(endDate.valueOf()> webix.Date.add(date,1,\"day\",true).valueOf()){\n\t\t\t\t\t\tendDate = webix.Date.datePart(endDate);\n\t\t\t\t\t\tevent.end_date = webix.Date.add(endDate,1,\"day\",true);\n\t\t\t\t\t}\n\t\t\t\t\tresult.push(event);\n\t\t\t\t}\n\t\t\treturn result;\n\t\t},\n\t\t/*applies selected date to all lists*/\n\t\tsetDate:function(date, inc, mode){\n\t\t\tif (!date)\n\t\t\t\tdate = this.coreData.getValue();\n\t\t\telse \n\t\t\t\tdate = webix.Date.datePart(date,true);\n\n\t\t\tif (inc)\n\t\t\t\tdate = webix.Date.add(date, inc, mode, true);\n\n\t\t\tthis.coreData.setValue(date);\n\t\t},\n\t\t_initToolbars:function(){\n\t\t\tthis.attachEvent(\"onItemClick\", function(id){\n\t\t\t\t\n\t\t\t\tvar view_id = this.innerId(id);\n\t\t\t\tswitch(view_id){\n\t\t\t\t\tcase \"today\":\n\t\t\t\t\t\tthis.setDate(new Date());\t\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"add\":\n\t\t\t\t\t\tif(this.innerId(this.$$(\"views\").getActiveId()) == \"form\"){\n\t\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\t\twebix.confirm({\n\t\t\t\t\t\t\t\theight:scheduler.xy.confirm_height,\n\t\t\t\t\t\t\t\twidth:scheduler.xy.confirm_width,\n\t\t\t\t\t\t\t\ttitle: labels.icon_close,\n\t\t\t\t\t\t\t\tmessage: labels.confirm_closing,\n\t\t\t\t\t\t\t\tcallback: function(result) {\n\t\t\t\t\t\t\t\t\tif (result){\n\t\t\t\t\t\t\t\t\t\tself._addEvent();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tok:labels.icon_yes,\n\t\t\t\t\t\t\t\tcancel:labels.icon_no,\n\t\t\t\t\t\t\t\tcss:\"confirm\"\n\t\t\t\t\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis._addEvent();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"prev\":\n\t\t\t\t\t\tthis.setDate(null, -1, \"day\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"next\":\n\t\t\t\t\t\tthis.setDate(null, 1, \"day\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"prevWeek\":\n\t\t\t\t\t\tthis.setDate(null, -1, \"week\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"nextWeek\":\n\t\t\t\t\t\tthis.setDate(null, 1, \"week\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"edit\":\n\t\t\t\t\t\tthis._editEvent();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"cancel_date\":\n\t\t\t\t\tcase \"back\":\n\t\t\t\t\t\tthis.$$(\"views\").back();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"cancel\":\n\t\t\t\t\t\t/*if(!this.config.editEvent)\n\t\t\t\t\t\t\tthis.remove(this.getCursor());*/\n\t\t\t\t\t\tthis.callEvent(\"onAfterCursorChange\",[this.getCursor()]);\n\t\t\t\t\t\tthis.$$(\"views\").back();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"save\":\n\t\t\t\t\t\tthis._saveEvent();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"delete\":\n\t\t\t\t\t\tthis._deleteEvent();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"start_date\":\n\t\t\t\t\tcase \"end_date\":\n\t\t\t\t\t\tif(this.$$(view_id).name == \"datetext\")\n\t\t\t\t\t\t\tthis._showDateForm(view_id);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"done\":\n\t\t\t\t\t\tif(this._isFormCalendarZoomed){\n\t\t\t\t\t\t\tthis.$$(\"formCalendar\").selectDate(this.$$(\"formCalendar\").config.date,true);\n\t\t\t\t\t\t\tthis._isFormCalendarZoomed = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tvar field = this.dateField.getValue();\n\t\t\t\t\t\t\tvar date = this.$$(\"formCalendar\").getValue();\n\t\t\t\t\t\t\tthis.$$(field).setValue(date);\n\t\t\t\t\t\t\tthis._setDefaultDates();\n\t\t\t\t\t\t\tthis.$$(\"views\").back();\n\t\t\t\t\t\t\tthis.$$(\"editForm\").validate();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"allDay\":\n\t\t\t\t\t\tthis._setAllDay();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t//do nothing\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\t\t\n\t\t\t});\n\t\t\tthis.attachEvent(\"onAfterTabClick\", function(id, button){\n\t\t\t\tthis.$$(button).show();\n\t\t\t});\n\t\t\tthis.attachEvent(\"onBeforeTabClick\", function(id, button){\n\t\t\t\treturn this._confirmViewChange(button);\n\t\t\t});\n\t\t},\n\t\treadonly_setter:function(val){\n\t\t\tif(this.$$(\"add\")){\n\t\t\t\tif (val){\n\t\t\t\t\tthis.$$(\"bottomBar\").showBatch(\"readonly\");\n\t\t\t\t\tthis.$$(\"edit\").hide();\n\t\t\t\t\tthis.$$(\"delete\").hide();\n\t\t\t\t} else {\n\t\t\t\t\tthis.$$(\"bottomBar\").showBatch(\"default\");\n\t\t\t\t\tthis.$$(\"edit\").show();\n\t\t\t\t\tthis.$$(\"delete\").show();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn val;\n\t\t},\n\t\t/*removes \"No events\" background*/\n\t\t_clearNoEventsStyle:function(){\n\t\t\tif(this.dataCount())\n\t\t\t\tthis.$view.className = this.$view.className.replace(RegExp(this.type.cssNoEvents, \"g\"),\"\");\n\t\t\telse \n\t\t\t\tthis.$view.className += \" \"+this.type.cssNoEvents;\n\t\t},\n\t\t_saveEvent: function(){\n\t\t\t//alert(this.$$(\"editForm\").validate())\n\t\t\tif(this.$$(\"editForm\").validate()){\n\t\t\t\tif(!this.config.editEvent){\n\t\t\t\t\tvar data = this.$$(\"editForm\").getValues();\n\t\t\t\t\tdata.id = webix.uid();\n\t\t\t\t\tif(data.details&&this._trim(data.text)===\"\"&&this._trim(data.details)!==\"\")\n\t\t\t\t\t\tdata.text = data.details;\n\t\t\t\t\tthis.add(data);\n\t\t\t\t\tthis.setCursor(data.id);\n\t\t\t\t} else {\n\t\t\t\t\tthis.$$(\"editForm\").save();\n\t\t\t\t}\n\t\t\t\t//webix.dp(this).save();\n\t\t\t\tthis.setDate();\n\t\t\t\tthis.$$(\"views\").back();\n\t\t\t}\n\t\t},\n\t\t/*deletes the cursored event*/\n\t\t_deleteEvent: function(){\n\t\t\tvar self = this;\n\t\t\twebix.confirm({\n\t\t\t\theight:scheduler.xy.confirm_height,\n\t\t\t\twidth:scheduler.xy.confirm_width,\n\t\t\t\ttitle: labels.icon_delete,\n\t\t\t\ttext: labels.confirm_deleting,\n\t\t\t\tcallback: function(result) {\n\t\t\t\t\tif (result){\n\t\t\t\t\t\tself.remove(self.getCursor());\n\t\t\t\t\t\tself.setDate();\n\t\t\t\t\t\tself.$$(\"views\").back(1);\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tok:labels.icon_yes,\n\t\t\t\tcancel:labels.icon_no,\n\t\t\t\tcss:\"confirm\",\n\t\t\t\theader:false\n\t\t\t});\n\t\t},\n\t\t/*adds the new event*/\n\t\t_addEvent:function(){\n\t\t\t/*if(this.$$(\"delete\"))\n\t\t\t\tthis.$$(\"delete\").hide();*/\n\t\t\tthis.define(\"editEvent\",false);\t\t\t\t\n\t\t\tthis.$$(\"form\").show();\n\t\t\t\n\t\t\t\n\t\t\tthis.$$(\"editForm\").clear();\n\t\t\tthis.$$(\"editForm\").clearValidation();\n\t\t\tthis.$$(\"editForm\").setValues(templates.new_event_data.call(this));\n\t\t\tthis._setDefaultDates();\n\t\t},\n\t\teventDefaultDate:function(){\n\t\t\t\n\t\t},\n\t\t/* edit selected event*/\n\t\t_editEvent: function(){\n\t\t\tif(this.$$(\"delete\"))\n\t\t\t\tthis.$$(\"delete\").show();\n\t\t\tthis.define(\"editEvent\",true);\n\t\t\tthis.$$(\"form\").show();\n\t\t\tif(this.$$(\"rec_type\"))\n\t\t\t\tthis.$$(\"rec_type\").setValue(this.$$(\"rec_type\").getValue(),true);\n\t\t\tthis._setDefaultDates();\n\t\t},\n\t\t/*cofirm the view changing (necessary for edit form)*/\n\t\t_confirmViewChange:function(button){\n\t\t\tif(this.innerId(this.$$(\"views\").getActiveId()) == \"form\"){\n\t\t\t\tvar self = this;\n\t\t\t\tif(button!= \"today\")\n\t\t\t\t\twebix.confirm({\n\t\t\t\t\t\twidth:scheduler.xy.confirm_width,\n\t\t\t\t\t\ttitle: labels.icon_close,\n\t\t\t\t\t\ttext: labels.confirm_closing,\n\t\t\t\t\t\tcallback: function(result) {\n\t\t\t\t\t\t\tif (result){\n\t\t\t\t\t\t\t\tself.$$(button).show();\n\t\t\t\t\t\t\t\tself.$$(\"buttons\").setValue(button);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlabelOk:labels.icon_yes,\n\t\t\t\t\t\tlabelCancel:labels.icon_no,\n\t\t\t\t\t\tcss:\"confirm\"\n\t\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t/*displayes calendar for form dates*/\n\t\t_showDateForm:function(name){\n\t\t\tthis.dateField.setValue(name);\n\t\t\tif(this.$$(\"editForm\").elements.allDay)\n\t\t\t\tthis.$$(\"formCalendar\").define(\"timepicker\", !this.$$(\"editForm\").elements.allDay.getValue());\n\t\t\tthis.$$(\"formdate\").show();\n\t\t\twebix.delay(function(){\n\t\t\t\tthis.$$(\"formCalendar\").resize();\n\t\t\t\tthis.$$(\"formCalendar\").selectDate(webix.Date.copy(this.$$(name).getValue()),true);\n\t\t\t},this);\n\t\t},\n\t\t/*checks time of the date*/\n\t\t_checkAllDay:function(date){\n\t\t\treturn date.valueOf()== webix.Date.datePart(date,true).valueOf();\n\t\t},\n\t\t/*onclick handler for addDay toggle*/\n\t\t_setAllDay:function(){\n\t\t\tvar format = (this.$$(\"allDay\").getValue()==\"1\"?webix.i18n.formAllDayFormatStr:webix.i18n.formDateStr);\n\t\t\tvar elements = this.$$(\"editForm\").elements;\n\t\t\tvar fields = [this.$$(\"start_date\"),this.$$(\"end_date\")];\n\t\t\tfor(var i=0;i<2;i++){\n\t\t\t\tfields[i].config.dateFormatStr = format;\n\t\t\t\tif(elements.allDay.getValue()!=1)\n\t\t\t\t\tfields[i].setValue(this._event_date[i],true);\n\t\t\t}\n\t\t\tif(elements.allDay.getValue()==1){\n\t\t\t\tfields[0].setValue(webix.Date.datePart(this._event_date[0],true),true);\n\t\t\t\tvar end = webix.Date.datePart(this._event_date[1],true);\n\t\t\t\tif(end.valueOf()<=fields[0].getValue().valueOf())\n\t\t\t\t\tend = webix.Date.add(end,1,\"day\",true);\n\t\t\t\tfields[1].setValue(end,true);\n\t\t\t}\n\t\t},\n\t\t/*called when editing form is shown. Creates copies of event dates and set allDay state*/\n\t\t_setDefaultDates:function(){\n\t\t\tthis._event_date = [];\n\t\t\tvar elements = this.$$(\"editForm\").elements;\n\t\t\tthis._event_date[0] = this.$$(\"start_date\").getValue();\n\t\t\tthis._event_date[1] = this.$$(\"end_date\").getValue();\n\t\t\tvar value = (this._checkAllDay(this._event_date[0])&&this._checkAllDay(this._event_date[1])&&(this._event_date[1].valueOf()>this._event_date[0].valueOf())?1:0);\n\t\t\tif(!elements.allDay)\n\t\t\t\treturn;\n\t\t\telements.allDay.setValue(value);\n\t\t\tvar format = (elements.allDay.getValue()?webix.i18n.formAllDayFormatStr:webix.i18n.formDateStr);\n\t\t\tvar fields = [this.$$(\"start_date\"),this.$$(\"end_date\")];\n\t\t\tfor(var i=0;i<2;i++){\n\t\t\t\tfields[i].config.dateFormatStr = format;\n\t\t\t\tfields[i].setValue(this._event_date[i],true);\n\n\t\t\t}\n\t\t},\n\t\t/*remove leading and end whitespaces*/\n\t\t_trim: function(value) {\n\t\t\tvalue = value.replace(/^ */g, \"\");\n\t\t\tvalue = value.replace(/ *$/g, \"\");\n\t\t\treturn value;\n\t\t},\n\t\tsetLoadMode:function(mode){\n\t\t\tif (mode==\"all\") mode=\"\";\n\t\t\tthis._load_mode=mode;\n\t\t},\n\t\t_loaded_ranges:{},\n\t\tload: function(url){\n\t\t\tthis._load_url = url;\n\t\t\tvar args = arguments;\n\t\t\tif (this._load_mode && typeof url == \"string\"){\n\t\t\t\turl+=(url.indexOf(\"?\")==-1?\"?\":\"&\")+\"timeshift=\"+(new Date()).getTimezoneOffset();\n\t\t\t\tvar to;\n\t\t\t\tvar from= this.coreData.getValue();\n\t\t\t\tvar lf =  webix.i18n.loadDateFormatStr;\n\n\t\t\t\tfrom = webix.Date[this._load_mode+\"Start\"](new Date(from.valueOf()));\n\t\t\t\tto = from;\n\n\t\t\t\tto=webix.Date.add(to,1,this._load_mode,true);\n\t\t\t\tif (this._loaded_ranges[lf(from)])\n\t\t\t\t\tfrom=webix.Date.add(from,1,this._load_mode,true);\n\n\t\t\t\tvar temp_to=to;\n\t\t\t\tdo {\n\t\t\t\t\tto = temp_to;\n\t\t\t\t\ttemp_to=webix.Date.add(to,-1,this._load_mode,true);\n\t\t\t\t} while (temp_to>from && this._loaded_ranges[lf(temp_to)]);\n\n\t\t\t\tif (to<=from)\n\t\t\t\t\treturn false; //already loaded\n\t\t\t\targs[0] = url+\"&from=\"+lf(from)+\"&to=\"+lf(to);\n\n\t\t\t\twhile(from<to){\n\t\t\t\t\tthis._loaded_ranges[lf(from)]=true;\n\t\t\t\t\tfrom=webix.Date.add(from,1,this._load_mode,true);\n\t\t\t\t}\n\t\t\t}\n\t\t\twebix.DataLoader.prototype.load.apply(this,args);\n\t\t}\n\t}, webix.IdSpace, webix.DataLoader, webix.ui.layout, webix.EventSystem, webix.Settings);\n});\n\n\nrec.code();\n// #include scheduler/scheduler_recurring.js","export const values = {\n\tconfirm_height : 180,\n\tconfirm_width : 250,\n\tscale_width : 40,\n\tmin_event_height: 20,\n\tscale_height : 20,\n\tweek_tab:60,\n\tday_tab:60,\n\tmonth_tab:68,\n\ticon_today : 55,\n\ticon_save : 90,\n\ticon_done : 90,\n\ticon_cancel : 80,\n\ticon_edit : 90,\n\ticon_back : 70,\n\tlist_header_height: 30,\n\tlist_height: 50,\n\tall_day: 120,\n\tmonth_list_height: 50,\n\trecurring: {\n\t\tlabel_end_repeat: 140,\n\t\tlabel_end_by: 240,\n\t\tlabel_every: 65,\n\t\twork_days:180\n\t}\n};"],"names":["values","init_date","Date","form_date","form_all_day","parse_date","week_date","dyn_load_date","item_date","all_day_date","day_header_date","week_header_date","hour_date","scale_hour","calendar_date","calendar_hour","form_rules","end_date","value","obj","start_date","valueOf","multi_day","multi_day_limit","views","tab_views","server_utc","separate_short_events","recurring","endless_date","recurring_dialogs","labels","xy","config","templates","day_event_style","style","color","rgb","webix","toRgb","toString","hsv","rgbToHsv","hsvToRgb","multi_day_event_style","selected_event","html","fts","fte","start","end","scheduler","event_class","text","datePart","fd","i18n","dateFormatStr","timeFormatStr","locale","label_from","label_to","fds","longDateFormatStr","fde","details","label_details","week_title","date","weekStart","add","headerWeekFormatStr","day_title","headerFormatStr","calendar_event","day","getDate","calendar_day","event_date","parseInt","weekDateFormatStr","event_time","label_allday","event_marker","event_title","type","eventClass","timeStart","marker","textColor","month_event_title","day_event","multi_day_event","new_event_data","hours","getHours","copy","this","coreData","getValue","setHours","template","protoUI","name","defaults","hourFormat","hourClock","firstHour","lastHour","timeScaleWidth","minEventHeight","timeScaleHeight","scroll","scaleBorder","eventOffset","separateShortEvents","$init","_dataobj","$view","firstChild","position","className","data","provideApi","attachEvent","bind","render","window","scale_width","min_event_height","scale_height","isVisible","id","$blockRender","callEvent","_renderScale","_prepareEvents","templateCss","innerHTML","getRange","map","_toHTML","join","_htmlmap","getItemNode","search_id","t","childNodes","i","length","getAttribute","_id","mark","getMark","content","$template","templateStart","templateEnd","h","hourScaleItem","on_click","hour","d","dateToStr","hourHeight","sectionWidth","Math","floor","heightTop","eventZoneWidth","$width","aria","common","sel","templateColor","classname","padding","ev","j","k","_is_sorder","_max_sorder","_sorder_set","evs","stack","_minMappedDuration","ceil","$inner","_getEventEndDate","splice","$sorder","push","max_count","$count","_setPosition","sh","eh","setMinutes","temp_width","$left","sm","getMinutes","em","$top","round","$height","max","ev_duration","$setSize","x","y","ui","view","prototype","call","list","icon","$renderIcon","height","aheight","inputPadding","once","_after_render","event","getInputNode","e","code","which","keyCode","triggerEvent","document","activeElement","setValue","forceReset","oldvalue","changed","$setValue","format","_typeof","dateFormat_setter","strToDate","getElementsByTagName","richselect","units","_setUnits","_getUnitRange","noEvents","$unit","templateStartHeader","templateHeader","u","unit","extend","toArray","getTopParentView","next","result","_correctEventsDates","getEvents","headerHeight","margin","apply","arguments","css","$selected","layout","$cssName","$renderInput","escape","label","button","x_count","cellHeight","webix_cal_day_num","define","activeCell_setter","activeCell","c","cellWidth","MouseEvents","EventSystem","recView","$$","arr","split","typeToId","datetext","skipEvent","endlessDate","never","getItem","select","getSelected","setValues","dayCount","getValues","form","getDay","weekCount","weekDays","elementsConfig","labelWidth","rows","labelRight","calendar","dayFull","topParent","expand","monthCount","weekDayM","weekCountM","monthDayM","res","collapsed","yearCount","weekDayY","weekCountY","monthDayY","getMonth","head","body","click","getParentView","_callback","labelSeries_setter","_body_cell","_cells","labelEvent_setter","labelCancel_setter","alert","rec_dialog","single","week_tab","day_tab","month_tab","icon_today","icon_add","icon_save","icon_done","icon_delete","icon_cancel","icon_edit","icon_back","icon_close","icon_yes","icon_no","icon_prev_day","icon_next_day","icon_prev_week","icon_next_week","confirm_closing","confirm_deleting","label_event","label_start","label_end","label_time","label_no_events","none","daily","every","weekly","week","each","on_day","monthly","month","month_day","week_day","yearly","year","counters","repeat","end_repeat","endless_repeat","end_repeat_label","edit_message","edit_series","edit_occurrence","delete_message","delete_series","delete_occurrence","modConfig","confirm_height","confirm_width","list_header_height","list_height","all_day","month_list_height","label_end_repeat","label_end_by","label_every","work_days","modTemplates","ready","Locale","init","dateFormat","hourPart","match","aPart","bottom_toolbar","inputWidth","align","width","mode","multiview","options","batch","day_toolbar","week_toolbar","selected_toolbar","form_toolbar","date_toolbar","listType","cssNoEvents","types","event_list","day_event_list","multi_day_list","marks","$css","webix_selected","weekevents","DataDriver","records","xml","tabViews","cols","autoheight","yCount","elements","startDate","icons","dayWithEvents","dayNoEvents","calendarHeader","concat","delete_button","screen","animate","env","touch","cells","visibleBatch","paddingX","rules","timepickerHeight","calendarTime","timepicker","hourStart","version","_setDateMethods","weekDateFormat","formDate","formAllDayFormat","timeFormat","fullDateFormat","fullDateFormatUTC","longDateFormat","loadDateFormat","helpers","key","utc","setLocale","scheme","fullDateFormatDate","$update","$serialize","fullDateFormatStr","$ready","_initStructure","syncData","target","filter","events","tpull","pull","torder","order","_syncAllViews","resize","getWeekTitle","getDayTitle","getTodayMultiEvents","dateStart","dateEnd","equal","getWeekEvents","getTodayEvents","_setMonthFlags","top","getVisibleDate","setDate","_eventsByDate","_initHotKeys","getSelectedId","locate","_on_event_clicked","UIManager","addHotKey","_initToolbars","_initMonth","DataValue","selectedEvent","DataRecord","readonly","dayTitle","weekTitle","_sortDates","_isFormCalendarZoomed","_load_mode","_load_url","load","_loaded_ranges","_onViewChanged","show","_initForm","dateField","zoom","hide","unselectAll","_last_selected","setCursor","blockEvent","sort","a","b","unblockEvent","_isMonthCalendarZoomed","oldDate","today","getYear","animateView","getBody","direction","dayTemplate","from","to","endDate","rec_type","event_length","inc","view_id","innerId","getActiveId","self","confirm","title","message","callback","_addEvent","ok","cancel","_editEvent","back","getCursor","_saveEvent","_deleteEvent","_showDateForm","selectDate","field","_setDefaultDates","validate","_setAllDay","_confirmViewChange","readonly_setter","val","showBatch","_clearNoEventsStyle","dataCount","replace","RegExp","editEvent","save","uid","_trim","remove","header","clear","clearValidation","eventDefaultDate","labelOk","labelCancel","allDay","delay","_checkAllDay","formAllDayFormatStr","formDateStr","fields","_event_date","setLoadMode","url","args","indexOf","getTimezoneOffset","lf","loadDateFormatStr","temp_to","DataLoader","IdSpace","Settings","endRepeat","getValueBase","getEventsBase","out","repeat_date","_saveEventBase","event_pid","_add_rec_marker","_editEventBase","item","_applyRecExeption","labelSeries","labelEvent","_deleteEventBase","hidden","_recTypeState","rec_pattern","_rec_markers","_rec_markers_pull","time","_pid_time","_get_rec_marker","ch","_get_rec_markers","transponse_size","day_week","sd","nday","transpose_day_week","cor","size","cor2","cday","startOnMonday","transpose_type","f","str","step","days","nd","td","delta","count","getFullYear","setMonth","sub","hasOwnProperty","ted","shift","recurring_bar","recurring_views_list","rec_list_item","rec_init_form","datatype","maxHeight","end_repeat_form","paddingY","vertical","daily_form","selected_event_base","ed","weekly_form","borderless","monthDays","rec_month_d","rec_month_w","rec_month_d_blured","rec_month_w_blured","week_day_counters","week_day_labels","monthly_form","headerAltHeight","headerAlt","year_months","month_short","monthShort","yearly_form","recurring_views","_setEvents","idToType","_showRecViewsList","_applyRecurrence","_showRecView","_setEndDate","v1","v2","typeArr","recType","pop","end_by","_setEndByVisibility"],"mappings":"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"}